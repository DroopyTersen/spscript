!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){(function(e){"use strict";var t=n(22);e.Promise||(e.Promise=t),mocha.setup("bdd"),chai.should();var r=n(7);n(36).run(r.default),mocha.run()}).call(t,function(){return this}())},function(e,t,n){"use strict";function r(){return!("undefined"==typeof window)}function o(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){return null}return e}function i(e){e=o(e);var t=null;return e.d&&e.d.results&&null!=e.d.results.length?t=e.d.results:e.d&&(t=e.d),t||e}Object.defineProperty(t,"__esModule",{value:!0});var s=n(18),a=n(17),u={isBrowser:r,headers:a.default,parseJSON:o,validateODataV2:i,qs:{toObj:s.toObj,fromObj:s.fromObj}};t.default=u},function(e,t,n){e.exports=n(44)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),s=n(13),a=function(){function e(t,n){r(this,e),this.baseUrl=t,this._dao=n}return o(e,[{key:"getRoleAssignments",value:function(){var e=this.baseUrl+"/RoleAssignments?$expand=Member,RoleDefinitionBindings";return this._dao.get(e).then(i.default.validateODataV2).then(function(e){return e.map(u)})}},{key:"checkPrivs",value:function(e){var t=encodeURIComponent(e.LoginName),n=this.baseUrl+"/getusereffectivepermissions(@v)?@v='"+t+"'";return this._dao.get(n).then(i.default.validateODataV2)}},{key:"check",value:function(e){var t=this;if(!e&&!i.default.isBrowser())return Promise.reject("Can't check permissions. No email passed and no current user");var n=e?this._dao.web.getUser(e):this._dao.get("/web/getuserbyid("+_spPageContextInfo.userId+")").then(function(e){return e.d});return n.then(function(e){return t.checkPrivs(e)}).then(function(e){return c(e.GetUserEffectivePermissions.Low,e.GetUserEffectivePermissions.High)})}}]),e}();t.default=a;var u=function(e){var t={login:e.Member.LoginName,name:e.Member.Title,id:e.Member.Id},n=e.RoleDefinitionBindings.results.map(function(e){return{name:e.Name,description:e.Description,basePermissions:c(e.BasePermissions.Low,e.BasePermissions.High)}});return{member:t,roles:n}},c=function(e,t){var n=[];return s.basePermissions.forEach(function(r){((r.low&e)>0||(r.high&t)>0)&&n.push(r.name)}),n}},function(e,t){e.exports={includeStack:!1,showDiff:!0,truncateThreshold:40}},function(e,t){/*!
	 * Chai - flag utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
e.exports=function(e,t,n){var r=e.__flags||(e.__flags=Object.create(null));return 3!==arguments.length?r[t]:void(r[t]=n)}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),a=n(3),u=function(){function e(t,n){r(this,e),this.listName=t,this.baseUrl="/web/lists/getbytitle('"+this.listName+"')",this._dao=n,this.permissions=new a.default(this.baseUrl,n)}return i(e,[{key:"getItems",value:function(e){return this._dao.get(this.baseUrl+"/items"+c(e)).then(s.default.validateODataV2)}},{key:"getItemById",value:function(e,t){var n=this.baseUrl+"/items("+e+")"+c(t);return this._dao.get(n).then(s.default.validateODataV2)}},{key:"findItems",value:function(e,t,n){var r="string"==typeof t?"'"+t+"'":t;return n="$filter="+e+" eq "+r+c(n,"&"),this.getItems(n)}},{key:"findItem",value:function(e,t,n){return this.findItems(e,t,n).then(function(e){return e&&e.length&&e.length>0?e[0]:null})}},{key:"getInfo",value:function(){return this._dao.get(this.baseUrl).then(s.default.validateODataV2)}},{key:"addItem",value:function(e,t){var n=this;return this._dao._ensureRequestDigest(t).then(function(t){return n._dao.get(n.baseUrl).then(function(r){e=o({},{__metadata:{type:r.d.ListItemEntityTypeFullName}},e);var i={headers:s.default.headers.getAddHeaders(t)};return n._dao.post(n.baseUrl+"/items",e,i)}).then(s.default.validateODataV2)})}},{key:"updateItem",value:function(e,t,n){var r=this;return this._dao._ensureRequestDigest(n).then(function(n){return r.getItemById(e).then(function(e){t=o({},{__metadata:{type:e.__metadata.type}},t);var i={headers:s.default.headers.getUpdateHeaders(n,e.__metadata.etag)};return r._dao.post(e.__metadata.uri,t,i)})})}},{key:"deleteItem",value:function(e,t){var n=this;return this._dao._ensureRequestDigest(t).then(function(t){return n.getItemById(e).then(function(e){var r={headers:s.default.headers.getDeleteHeaders(t,e.__metadata.etag)};return n._dao.post(e.__metadata.uri,"",r)})})}}]),e}();t.default=u;var c=function(e,t){return t=t||"?",e?t+e:""}},function(e,t,n){(function(e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(8),i={utils:r.default,createContext:function(t,n,r){try{return!t&&e._spPageContextInfo&&(t=e._spPageContextInfo.webAbsoluteUrl),new o.default(t)}catch(e){throw new Error("Unable to create SPScript Context: "+e.message)}}};t.default=i}).call(t,function(){return this}())},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var s=n(9),a=n(1),u=n(6),c=n(19),h=n(15),l=n(11),f=n(14),d=function(){function e(t,n,o){r(this,e),this.webUrl=t,this.clientId=n,this.clientSecret=o,this.ensureToken=n?Promise.resolve():Promise.resolve(),this.search=new h.default(this),this.customActions=new l.default(this),this.web=new c.default(this),this.profiles=new f.default(this)}return i(e,[{key:"executeRequest",value:function(e,t){var n=/^http/i.test(e)?e:this.webUrl+"/_api"+e,r={url:n,method:"GET",headers:{Accept:"application/json; odata=verbose","Content-Type":"application/json; odata=verbose"}};this.accessToken&&(r.headers.Authorization="Bearer "+this.accessToken);var i=o({},r,t);return s.default(i)}},{key:"get",value:function(e,t){var n=o({},{method:"GET"},t);return this.executeRequest(e,n).then(a.default.parseJSON)}},{key:"post",value:function(e,t,n){t=this._packagePostBody(t,n);var r={method:"POST",data:t};return r=o({},r,n),this.executeRequest(e,r).then(a.default.parseJSON)}},{key:"authorizedPost",value:function(e,t,n){var r=this;return this.getRequestDigest().then(function(e){return a.default.headers.getActionHeaders(n,e)}).then(function(n){return r.post(e,t,{headers:n})})}},{key:"_ensureRequestDigest",value:function(e){return e?Promise.resolve(e):this.getRequestDigest()}},{key:"getRequestDigest",value:function(){return this.post("/contextInfo",{}).then(function(e){return e.d.GetContextWebInformation.FormDigestValue})}},{key:"lists",value:function(e){return new u.default(e,this)}},{key:"_packagePostBody",value:function(e,t){return"string"==typeof e?e:t&&t.headers&&t.headers["Content-Type"]&&t.headers["Content-Type"].indexOf("json")===-1?e:JSON.stringify(e)}}]),e}();t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(10),o=function(e){if("undefined"==typeof window)throw new Error("No Node.js HTTP request module available yet.");return r.default(e)};t.default=o},function(e,t){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};Object.defineProperty(t,"__esModule",{value:!0});var o={method:"GET",async:!0,data:void 0},i=["GET","POST","PUT","HEAD","DELETE","PATCH"],s=function(e){return!(!e||!e.url||i.indexOf(e.method)<0)},a=function(e,t){t&&Object.keys(t).forEach(function(n){e.setRequestHeader(n,t[n])})},u=function e(t){var i=r({},o,t);if(!s(t))return Promise.reject(new Error("Invalid options passed into ajax call."));var e=new XMLHttpRequest;return null==e?Promise.reject(new Error("Your browser doesn't support XMLHttpRequest (ajax).")):(e.open(i.method,i.url,i.async),a(e,i.headers),e.responseType="json",new Promise(function(t,r){e.onreadystatechange=function(){if(4===e.readyState)if(e.status<400&&e.status>=100)t(e.status>=200&&e.status<300&&204!==e.status?e.response||e.status+"":e.response);else{var o=new Error("SPScript HTTP Error: "+e.status);e.response&&"object"===n(e.response)&&(o.message+="\n"+JSON.stringify(e.response,null,"  ")),r(o)}},e.send(i.data)}))};t.default=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),a=n(12),u=function(){function e(t){r(this,e),this._dao=t}return i(e,[{key:"getScope",value:function(e){if(3===e)return a.scopes.Web;if(2===e)return a.scopes.Site;throw new Error("Invalid Custom Action Scope")}},{key:"get",value:function(e){var t=this;return this._dao.get(a.scopes.Site.url).then(s.default.validateODataV2).then(function(e){return t._dao.get(a.scopes.Web.url).then(s.default.validateODataV2).then(function(t){return e.concat(t)})}).then(function(t){if(e){var n=t.filter(function(t){return t.Name===e});if(n.length)return n[0];throw new Error("Unable to find Custom Action with name: "+e)}return t})}},{key:"_getUrl",value:function(e){var t=this;return this.get(e).then(function(e){return t.getScope(e.Scope).url+"('"+e.Id+"')"})}},{key:"_getUrlAndDigest",value:function(e){var t=this,n={};return this._getUrl(e).then(function(e){return n.url=e,t._dao.getRequestDigest()}).then(function(e){return n.digest=e,n})}},{key:"update",value:function(e){var t=this;if(!e||!e.Name)throw new Error("You must at least pass a Custom Action 'Name'");return this._getUrlAndDigest(e.Name).then(function(n){e=o({},a.metadata,e);var r={headers:s.default.headers.getUpdateHeaders(n.digest)};return t._dao.post(n.url,e,r)})}},{key:"remove",value:function(e){var t=this;if(!e)throw new Error("You must at least pass an existing Custom Action name");return this._getUrlAndDigest(e).then(function(e){var n={headers:s.default.headers.getDeleteHeaders(e.digest)};return t._dao.post(e.url,{},n)})}},{key:"add",value:function(e){var t=this;if(!e||!e.Name)throw new Error("You must at least pass a Custom Action 'Name'");var n={Name:e.Name,Title:e.Name,Description:e.Name,Group:e.Name,Sequence:100,Scope:"Site",Location:"ScriptLink"};return e=o({},n,e),this.get().then(function(n){return!n.filter(function(t){return t.Name===e.Name}).length||t.remove(e.Name)}).then(function(){return t._dao.getRequestDigest()}).then(function(n){e=o({},a.metadata,e);var r=a.scopes[e.Scope];e.Scope=r.id;var i={headers:s.default.headers.getAddHeaders(n)};return t._dao.post(r.url,e,i)})}},{key:"addScriptBlock",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={Name:e,ScriptBlock:t};return r=o({},r,n),this.add(r)}},{key:"addCSSLink",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r='\n\t\t(function() {\n\t\t\tvar head = document.querySelector("head");\n\t\t\tvar styleTag = document.createElement("style");\n\t\t\tstyleTag.appendChild(document.createTextNode("body { opacity: 0 }"));\n\t\t\t\n\t\t\tvar linkTag = document.createElement("link");\n\t\t\tlinkTag.rel = "stylesheet";\tlinkTag.href = "'+t+'"; linkTag.type = "text/css";\n\t\t\tlinkTag.addEventListener("load", function() {\n\t\t\t\thead.removeChild(styleTag);\n\t\t\t});\n\n\t\t\thead.appendChild(styleTag);\n\t\t\thead.appendChild(linkTag);\n\t\t})();';return this.addScriptBlock(e,r,n)}},{key:"addScriptLink",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r='\n\t\t(function() {\n\t\t\tvar head = document.querySelector("head");\n\t\t\tvar scriptTag = document.createElement("script");\n            scriptTag.src = "'+t+'";\n            scriptTag.type = "text/javascript";\n\t\t\thead.appendChild(scriptTag);\n\t\t})();';return this.addScriptBlock(e,r,n)}}]),e}();t.default=u},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.metadata={__metadata:{type:"SP.UserCustomAction"}},t.scopes={Web:{id:3,name:"Web",url:"/web/usercustomactions"},Site:{id:2,name:"Site",url:"/site/usercustomactions"}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.basePermissions=[{name:"emptyMask",low:0,high:0},{name:"viewListItems",low:1,high:0},{name:"addListItems",low:2,high:0},{name:"editListItems",low:4,high:0},{name:"deleteListItems",low:8,high:0},{name:"approveItems",low:16,high:0},{name:"openItems",low:32,high:0},{name:"viewVersions",low:64,high:0},{name:"deleteVersions",low:128,high:0},{name:"cancelCheckout",low:256,high:0},{name:"managePersonalViews",low:512,high:0},{name:"manageLists",low:2048,high:0},{name:"viewFormPages",low:4096,high:0},{name:"anonymousSearchAccessList",low:8192,high:0},{name:"open",low:65536,high:0},{name:"viewPages",low:131072,high:0},{name:"addAndCustomizePages",low:262144,high:0},{name:"applyThemeAndBorder",low:524288,high:0},{name:"applyStyleSheets",low:1048576,high:0},{name:"viewUsageData",low:2097152,high:0},{name:"createSSCSite",low:4194304,high:0},{name:"manageSubwebs",low:8388608,high:0},{name:"createGroups",low:16777216,high:0},{name:"managePermissions",low:33554432,high:0},{name:"browseDirectories",low:67108864,high:0},{name:"browseUserInfo",low:134217728,high:0},{name:"addDelPrivateWebParts",low:268435456,high:0},{name:"updatePersonalWebParts",low:536870912,high:0},{name:"manageWeb",low:1073741824,high:0},{name:"anonymousSearchAccessWebLists",low:-2147483648,high:0},{name:"useClientIntegration",low:0,high:16},{name:"useRemoteAPIs",low:0,high:32},{name:"manageAlerts",low:0,high:64},{name:"createAlerts",low:0,high:128},{name:"editMyUserInfo",low:0,high:256},{name:"enumeratePermissions",low:0,high:1073741824}]},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),s=function(){function e(t){r(this,e),this._dao=t,this.baseUrl="/SP.UserProfiles.PeopleManager"}return o(e,[{key:"current",value:function(){var e=this.baseUrl+"/GetMyProperties";return this._dao.get(e).then(i.default.validateODataV2).then(a)}},{key:"get",value:function(e){var t=this;return e?this.getUserObj(e).then(function(e){var n=encodeURIComponent(e.LoginName||e.AccountName),r=t.baseUrl+"/GetPropertiesFor(accountName=@v)?@v='"+n+"'";return t._dao.get(r).then(i.default.validateODataV2).then(a)}):this.current()}},{key:"getUserObj",value:function(e){if(e&&"string"!=typeof e){if(e.AccountName||e.LoginName)return Promise.resolve(e);throw new Error("profiles.setProperty Error: Invalid user parameter")}return this._dao.web.getUser(e)}},{key:"setProperty",value:function(e,t,n){var r=this;return this.getUserObj(n).then(function(n){var o={propertyName:e,propertyValue:t,accountName:n.LoginName||n.AccountName},i=r.baseUrl+"/SetSingleValueProfileProperty";return r._dao.authorizedPost(i,o)})}}]),e}();t.default=s;var a=function(e){return console.log(e),e.UserProfileProperties.results.forEach(function(t){e[t.Key]=t.Value}),e}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),s=n(16),a=function(){function e(t){r(this,e),this._dao=t}return o(e,[{key:"query",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.default.qs.fromObj(t,!0),r="/search/query?querytext='"+e+"'&"+n;return this._dao.get(r).then(i.default.validateODataV2).then(function(e){if(e.query)return s.mapResponse(e.query);throw new Error("Invalid response back from search service")})}},{key:"people",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.sourceid="b09a7990-05ea-4af9-81ef-edfab16c4e31",this.query(e,t)}},{key:"sites",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t=t?"Path:"+t+"*":"";var r=(e+" contentclass:STS_Web "+t).trim();return n.rowlimit=n.rowlimit||499,this.query(r,n)}},{key:"defaultQueryOptions",get:function(){return{sourceid:null,startrow:null,rowlimit:100,selectedproperties:null,refiners:null,refinementfilters:null,hiddencontstraints:null,sortlist:null}}}]),e}();t.default=a},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapResponse=function(e){return{elapsedTime:e.ElapsedTime,suggestion:e.SpellingSuggestion,resultsCount:e.PrimaryQueryResult.RelevantResults.RowCount,totalResults:e.PrimaryQueryResult.RelevantResults.TotalRows,totalResultsIncludingDuplicates:e.PrimaryQueryResult.RelevantResults.TotalRowsIncludingDuplicates,items:t.mapItems(e.PrimaryQueryResult.RelevantResults.Table.Rows.results),refiners:t.mapRefiners(e.PrimaryQueryResult.RefinementResults)}},t.mapRefiners=function(e){var t=[];return e&&e.Refiners&&e.Refiners.results&&(t=e.Refiners.results.map(function(e){return{RefinerName:e.Name,RefinerOptions:e.Entries.results}})),t},t.mapItems=function(e){for(var t=[],n=0;n<e.length;n++){for(var r=e[n],o={},i=0;i<r.Cells.results.length;i++)o[r.Cells.results[i].Key]=r.Cells.results[i].Value;t.push(o)}return t}},function(e,t){"use strict";function n(e){var t={Accept:o,"Content-Type":o};return e&&(t["X-RequestDigest"]=e),t}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};Object.defineProperty(t,"__esModule",{value:!0});var o="application/json;odata=verbose",i=n,s=function(e){return{Accept:o,"X-RequestDigest":e,"Content-Type":"application/octet-stream",binaryStringRequestBody:"true"}},a=function(e,t){return r({},n(t),{"X-HTTP-Method":e})},u=function(e,t){return t&&(e["If-Match"]=t),e},c=function(e,t){return u(a("MERGE",e),t)},h=function(e,t){return u(a("DELETE",e),t)},l={getStandardHeaders:n,getAddHeaders:i,getFilestreamHeaders:s,getUpdateHeaders:c,getDeleteHeaders:h,getActionHeaders:a};t.default=l},function(e,t,n){"use strict";function r(e,t){var n=function(n){var r=(e[n]+"").trim();return(r.indexOf(" ")>-1||t)&&(r="'"+r+"'"),n+"="+r},r=Object.keys(e).map(n).join("&");return r}function o(e){return void 0===e&&window&&window.location&&window.location.search&&(e=window.location.search),e?("?"===e[0]&&(e=e.substr(1)),i.parse(e)):{}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(25);t.fromObj=r,t.toObj=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),s=n(3),a=function(){function e(t){r(this,e),this.baseUrl="/web",this._dao=t,this.permissions=new s.default(this.baseUrl,t)}return o(e,[{key:"getInfo",value:function(){return this._dao.get(this.baseUrl).then(i.default.validateODataV2)}},{key:"getSubsites",value:function(){return this._dao.get(this.baseUrl+"/webinfos").then(i.default.validateODataV2)}},{key:"getUser",value:function(e){var t=e?this.baseUrl+"/SiteUsers/GetByEmail('"+e+"')":this.baseUrl+"/CurrentUser";return this._dao.get(t).then(i.default.validateODataV2)}},{key:"ensureUser",value:function(e){return this._dao.post("/web/ensureUser('"+e+"')").then(i.default.validateODataV2)}},{key:"getFile",value:function(e){var e="/web/getfilebyserverrelativeurl('"+e+"')";return this._dao.get(e).then(i.default.validateODataV2)}},{key:"_copyFile",value:function(e,t,n){var r="/web/getfilebyserverrelativeurl('"+e+"')/CopyTo",o={headers:i.default.headers.getAddHeaders(n)},s={strNewUrl:t,bOverWrite:!0};return this._dao.post(r,s,o)}},{key:"copyFile",value:function(e,t,n){var r=this;return this._dao._ensureRequestDigest(n).then(function(n){return r._copyFile(e,t,n)})}}]),e}();t.default=a},function(e,t,n){function r(e,t,n,r){var i={showHidden:t,seen:[],stylize:function(e){return e}};return o(i,e,"undefined"==typeof n?2:n)}function o(e,n,r){if(n&&"function"==typeof n.inspect&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var p=n.inspect(r);return"string"!=typeof p&&(p=o(e,p,r)),p}var b=i(e,n);if(b)return b;if(g(n)){if("outerHTML"in n)return n.outerHTML;try{if(document.xmlVersion){var w=new XMLSerializer;return w.serializeToString(n)}var S="http://www.w3.org/1999/xhtml",A=document.createElementNS(S,"_");return A.appendChild(n.cloneNode(!1)),html=A.innerHTML.replace("><",">"+n.innerHTML+"<"),A.innerHTML="",html}catch(e){}}var x=m(n),_=e.showHidden?y(n):x;if(0===_.length||d(n)&&(1===_.length&&"stack"===_[0]||2===_.length&&"description"===_[0]&&"stack"===_[1])){if("function"==typeof n){var j=v(n),T=j?": "+j:"";return e.stylize("[Function"+T+"]","special")}if(l(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(f(n))return e.stylize(Date.prototype.toUTCString.call(n),"date");if(d(n))return s(n)}var E="",P=!1,O=["{","}"];if(h(n)&&(P=!0,O=["[","]"]),"function"==typeof n){var j=v(n),T=j?": "+j:"";E=" [Function"+T+"]"}if(l(n)&&(E=" "+RegExp.prototype.toString.call(n)),f(n)&&(E=" "+Date.prototype.toUTCString.call(n)),d(n))return s(n);if(0===_.length&&(!P||0==n.length))return O[0]+E+O[1];if(r<0)return l(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special");e.seen.push(n);var k;return k=P?a(e,n,r,x,_):_.map(function(t){return u(e,n,r,x,t,P)}),e.seen.pop(),c(k,E,O)}function i(e,t){switch(typeof t){case"undefined":return e.stylize("undefined","undefined");case"string":var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string");case"number":return 0===t&&1/t===-(1/0)?e.stylize("-0","number"):e.stylize(""+t,"number");case"boolean":return e.stylize(""+t,"boolean")}if(null===t)return e.stylize("null","null")}function s(e){return"["+Error.prototype.toString.call(e)+"]"}function a(e,t,n,r,o){for(var i=[],s=0,a=t.length;s<a;++s)Object.prototype.hasOwnProperty.call(t,String(s))?i.push(u(e,t,n,r,String(s),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(u(e,t,n,r,o,!0))}),i}function u(e,t,n,r,i,s){var a,u;if(t.__lookupGetter__&&(t.__lookupGetter__(i)?u=t.__lookupSetter__(i)?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):t.__lookupSetter__(i)&&(u=e.stylize("[Setter]","special"))),r.indexOf(i)<0&&(a="["+i+"]"),u||(e.seen.indexOf(t[i])<0?(u=null===n?o(e,t[i],null):o(e,t[i],n-1),u.indexOf("\n")>-1&&(u=s?u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return"   "+e}).join("\n"))):u=e.stylize("[Circular]","special")),"undefined"==typeof a){if(s&&i.match(/^\d+$/))return u;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+u}function c(e,t,n){var r=0,o=e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.length+1},0);return o>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function h(e){return Array.isArray(e)||"object"==typeof e&&"[object Array]"===p(e)}function l(e){return"object"==typeof e&&"[object RegExp]"===p(e)}function f(e){return"object"==typeof e&&"[object Date]"===p(e)}function d(e){return"object"==typeof e&&"[object Error]"===p(e)}function p(e){return Object.prototype.toString.call(e)}var v=n(30),y=n(56),m=n(53);e.exports=r;var g=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName}},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(h===setTimeout)return setTimeout(e,0);if((h===n||!h)&&setTimeout)return h=setTimeout,setTimeout(e,0);try{return h(e,0)}catch(t){try{return h.call(null,e,0)}catch(t){return h.call(this,e,0)}}}function i(e){if(l===clearTimeout)return clearTimeout(e);if((l===r||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(e);try{return l(e)}catch(t){try{return l.call(null,e)}catch(t){return l.call(this,e)}}}function s(){v&&d&&(v=!1,d.length?p=d.concat(p):y=-1,p.length&&a())}function a(){if(!v){var e=o(s);v=!0;for(var t=p.length;t;){for(d=p,p=[];++y<t;)d&&d[y].run();y=-1,t=p.length}d=null,v=!1,i(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var h,l,f=e.exports={};!function(){try{h="function"==typeof setTimeout?setTimeout:n}catch(e){h=n}try{l="function"==typeof clearTimeout?clearTimeout:r}catch(e){l=r}}();var d,p=[],v=!1,y=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new u(e,t)),1!==p.length||v||o(a)},u.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=c,f.addListener=c,f.once=c,f.off=c,f.removeListener=c,f.removeAllListeners=c,f.emit=c,f.prependListener=c,f.prependOnceListener=c,f.listeners=function(e){return[]},f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(e,t,n){(function(t){!function(n){function r(){}function o(e,t){return function(){e.apply(t,arguments)}}function i(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(e,this)}function s(e,t){for(;3===e._state;)e=e._value;return 0===e._state?void e._deferreds.push(t):(e._handled=!0,void i._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._state?a:u)(t.promise,e._value);var r;try{r=n(e._value)}catch(e){return void u(t.promise,e)}a(t.promise,r)}))}function a(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof i)return e._state=3,e._value=t,void c(e);if("function"==typeof n)return void l(o(n,t),e)}e._state=1,e._value=t,c(e)}catch(t){u(e,t)}}function u(e,t){e._state=2,e._value=t,c(e)}function c(e){2===e._state&&0===e._deferreds.length&&i._immediateFn(function(){e._handled||i._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)s(e,e._deferreds[t]);e._deferreds=null}function h(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function l(e,t){var n=!1;try{e(function(e){n||(n=!0,a(t,e))},function(e){n||(n=!0,u(t,e))})}catch(e){if(n)return;n=!0,u(t,e)}}var f=setTimeout;i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(e,t){var n=new this.constructor(r);return s(this,new h(e,t,n)),n},i.all=function(e){var t=Array.prototype.slice.call(e);return new i(function(e,n){function r(i,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var a=s.then;if("function"==typeof a)return void a.call(s,function(e){r(i,e)},n)}t[i]=s,0===--o&&e(t)}catch(e){n(e)}}if(0===t.length)return e([]);for(var o=t.length,i=0;i<t.length;i++)r(i,t[i])})},i.resolve=function(e){return e&&"object"==typeof e&&e.constructor===i?e:new i(function(t){t(e)})},i.reject=function(e){return new i(function(t,n){n(e)})},i.race=function(e){return new i(function(t,n){for(var r=0,o=e.length;r<o;r++)e[r].then(t,n)})},i._immediateFn="function"==typeof t&&function(e){t(e)}||function(e){f(e,0)},i._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},i._setImmediateFn=function(e){i._immediateFn=e},i._setUnhandledRejectionFn=function(e){i._unhandledRejectionFn=e},"undefined"!=typeof e&&e.exports?e.exports=i:n.Promise||(n.Promise=i)}(this)}).call(t,n(27).setImmediate)},function(e,t){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,r,o){t=t||"&",r=r||"=";var i={};if("string"!=typeof e||0===e.length)return i;var s=/\+/g;e=e.split(t);var a=1e3;o&&"number"==typeof o.maxKeys&&(a=o.maxKeys);var u=e.length;a>0&&u>a&&(u=a);for(var c=0;c<u;++c){var h,l,f,d,p=e[c].replace(s,"%20"),v=p.indexOf(r);v>=0?(h=p.substr(0,v),l=p.substr(v+1)):(h=p,l=""),f=decodeURIComponent(h),d=decodeURIComponent(l),n(i,f)?Array.isArray(i[f])?i[f].push(d):i[f]=[i[f],d]:i[f]=d}return i}},function(e,t){"use strict";var n=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,o){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map(function(o){var i=encodeURIComponent(n(o))+r;return Array.isArray(e[o])?e[o].map(function(e){return i+encodeURIComponent(n(e))}).join(t):i+encodeURIComponent(n(e[o]))}).join(t):o?encodeURIComponent(n(o))+r+encodeURIComponent(n(e)):""}},function(e,t,n){"use strict";t.decode=t.parse=n(23),t.encode=t.stringify=n(24)},function(e,t,n){(function(e,t){!function(e,n){"use strict";function r(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return v[p]=r,d(p),p++}function o(e){delete v[e]}function i(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}function s(e){if(y)setTimeout(s,0,e);else{var t=v[e];if(t){y=!0;try{i(t)}finally{o(e),y=!1}}}}function a(){d=function(e){t.nextTick(function(){s(e)})}}function u(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}function c(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&s(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),d=function(n){e.postMessage(t+n,"*")}}function h(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;s(t)},d=function(t){e.port2.postMessage(t)}}function l(){var e=m.documentElement;d=function(t){var n=m.createElement("script");n.onreadystatechange=function(){s(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}function f(){d=function(e){setTimeout(s,0,e)}}if(!e.setImmediate){var d,p=1,v={},y=!1,m=e.document,g=Object.getPrototypeOf&&Object.getPrototypeOf(e);g=g&&g.setTimeout?g:e,"[object process]"==={}.toString.call(e.process)?a():u()?c():e.MessageChannel?h():m&&"onreadystatechange"in m.createElement("script")?l():f(),g.setImmediate=r,g.clearImmediate=o}}("undefined"==typeof self?"undefined"==typeof e?this:e:self)}).call(t,function(){return this}(),n(21))},function(e,t,n){function r(e,t){this._id=e,this._clearFn=t}var o=Function.prototype.apply;t.setTimeout=function(){return new r(o.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new r(o.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(26),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t,n){"use strict";n(2).should(),t.create=function(e,t,n){return"check"===t?function(){var t=null;before(function(r){e.permissions.check(n).then(function(e){t=e,r()}).catch(function(e){r(e)})}),it("Should return a promise that resolves to an array of base permission strings",function(){t.should.be.an("array"),t.should.not.be.empty}),it("Should reject the promise for an invalid email",function(t){e.permissions.check("invalid@invalid123.com").then(function(e){"one".should.equal("two"),t()}).catch(function(e){t()})})}:function(){var t=null;before(function(n){e.permissions.getRoleAssignments().then(function(e){t=e,n()})}),it("Should return a promise that resolves to an array of objects",function(){t.should.be.an("array"),t.should.not.be.empty}),it("Should return objects that each have a member and a roles array",function(){
t.forEach(function(e){e.should.have.property("member"),e.should.have.property("roles"),e.roles.should.be.an("array")})}),it("Should return permission objects that contain member.name, member.login, and member.id",function(){t.forEach(function(e){e.member.should.have.property("name"),e.member.should.have.property("login"),e.member.should.have.property("id")})}),it("Should return permission objects, each with a roles array that has a name and description",function(){t.forEach(function(e){e.roles.forEach(function(e){e.should.have.property("name"),e.should.have.property("description")})})})}}},function(e,t){/*!
	 * Chai - getActual utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
e.exports=function(e,t){return t.length>4?t[4]:e._obj}},function(e,t){/*!
	 * Chai - getName utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
e.exports=function(e){if(e.name)return e.name;var t=/^\s?function ([^(]*)\(/.exec(e);return t&&t[1]?t[1]:""}},function(e,t,n){/*!
	 * Chai - flag utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
/*!
	 * Module dependancies
	 */
var r=n(20),o=n(4);e.exports=function(e){var t=r(e),n=Object.prototype.toString.call(e);if(o.truncateThreshold&&t.length>=o.truncateThreshold){if("[object Function]"===n)return e.name&&""!==e.name?"[Function: "+e.name+"]":"[Function]";if("[object Array]"===n)return"[ Array("+e.length+") ]";if("[object Object]"===n){var i=Object.keys(e),s=i.length>2?i.splice(0,2).join(", ")+", ...":i.join(", ");return"{ Object ("+s+") }"}return t}return t}},function(e,t){/*!
	 * Chai - transferFlags utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
e.exports=function(e,t,n){var r=e.__flags||(e.__flags=Object.create(null));t.__flags||(t.__flags=Object.create(null)),n=3!==arguments.length||n;for(var o in r)(n||"object"!==o&&"ssfi"!==o&&"message"!=o)&&(t.__flags[o]=r[o])}},function(e,t){/*!
	 * assertion-error
	 * Copyright(c) 2013 Jake Luer <jake@qualiancy.com>
	 * MIT Licensed
	 */
/*!
	 * Return a function that will copy properties from
	 * one object to another excluding any originally
	 * listed. Returned function will create a new `{}`.
	 *
	 * @param {String} excluded properties ...
	 * @return {Function}
	 */
function n(){function e(e,n){Object.keys(n).forEach(function(r){~t.indexOf(r)||(e[r]=n[r])})}var t=[].slice.call(arguments);return function(){for(var t=[].slice.call(arguments),n=0,r={};n<t.length;n++)e(r,t[n]);return r}}function r(e,t,r){var o=n("name","message","stack","constructor","toJSON"),i=o(t||{});this.message=e||"Unspecified AssertionError",this.showDiff=!1;for(var s in i)this[s]=i[s];r=r||arguments.callee,r&&Error.captureStackTrace&&Error.captureStackTrace(this,r)}/*!
	 * Primary Exports
	 */
e.exports=r,/*!
	 * Inherit from Error.prototype
	 */
r.prototype=Object.create(Error.prototype),/*!
	 * Statically set name
	 */
r.prototype.name="AssertionError",/*!
	 * Ensure correct constructor
	 */
r.prototype.constructor=r,r.prototype.toJSON=function(e){var t=n("constructor","toJSON","stack"),r=t({name:this.name},this);return!1!==e&&this.stack&&(r.stack=this.stack),r}},function(e,t,n){"use strict";n(2).should();t.run=function(e){describe("var ctx = SPScript.createContext(url)",function(){var t=e.createContext();it("Should allow a url to be passed in"),it("Should default to the current web if no url is passed"),describe("Members",function(){it("Should create the primary object you use to interact with the site",function(){if(!t)throw new Error("Context is null");t.should.have.property("webUrl"),t.should.have.property("executeRequest"),t.should.have.property("get"),t.should.have.property("post"),t.should.have.property("authorizedPost"),t.should.have.property("lists"),t.should.have.property("search")})}),describe("ctx.list(name)",function(){it("Should return an SPScript List instance",function(){var e=t.lists("My List");e.should.have.property("listName"),e.should.have.property("getInfo")})}),describe("ctx.search",function(){it("Should have an SPScript Search object with search methods (query, people, sites etc...)",function(){t.search.should.have.property("query"),t.search.should.have.property("people")})}),describe("ctx.get(url, [opts])",function(){var e;before(function(){e=t.get("/lists?$select=Title")}),it("Should return a Promise",function(){if(!e)throw new Error("Promise is null");e.should.have.property("then")}),it("Should resolve to a JS object, not a JSON string",function(t){e.then(function(e){e.should.have.property("d"),t()}).catch(function(e){return t(e)})}),it("Should return valid API results: ctx.get('/lists')",function(t){e.then(function(e){e.should.have.property("d"),e.d.should.have.property("results"),e.d.results.should.be.an("array"),t()}).catch(function(e){return t(e)})})}),describe("ctx.post(url, [body], [opts]",function(){it("Should return a Promise"),it("Should resolve to a JS object, not a JSON string")}),describe("ctx.getRequestDigest()",function(){it("Should resolve to a string request digest",function(e){t.getRequestDigest().then(function(t){t.should.be.a("string"),t.should.not.be.empty,e()})})})})}},function(e,t){"use strict";t.run=function(e){describe("dao.customActions",function(){this.timeout(1e4);var t={Name:"spscript-test",Location:"ScriptLink",ScriptBlock:"console.log('deployed from spscript-mocha test');"};describe("dao.customActions.add(customAction)",function(){var n=0;before(function(t){e.customActions.get().then(function(e){n=e.length,t()})}),it("Should add a Custom Action with the given name",function(r){e.customActions.add(t).then(function(){e.customActions.get().then(function(e){e.length.should.equal(n+1),r()})})}),it("Should not add duplicate Custom Action names. It should remove old one first.",function(r){e.customActions.add(t).then(function(){e.customActions.get().then(function(e){e.length.should.equal(n+1),r()})})})}),describe("dao.customActions.get()",function(){var t=null;before(function(n){e.customActions.get().then(function(e){t=e,n()})}),it("Should return a promise that resolves to an array of custom actions",function(){t.should.be.an("array"),t.should.not.be.empty}),it("Should bring back properties like Name, Url, and Location",function(){var e=t[0];e.should.have.property("Name"),e.should.have.property("Url"),e.should.have.property("Location")})}),describe("dao.customActions.get(name)",function(){var t=null;before(function(n){e.customActions.get().then(function(r){e.customActions.get(r[0].Name).then(function(e){t=e,n()})})}),it("Should return one object w/ properties like Name, Location, Url, Id",function(){t.should.not.be.null,t.should.have.property("Name"),t.should.have.property("Location"),t.should.have.property("Id")}),it("Should reject the promise with a decent error if the Custom Action name is not found",function(t){e.customActions.get("INVALID-NAME").then(function(){"one".should.equal("two"),t()}).catch(function(e){console.log(e),t()})})}),describe("dao.customActions.update(updates)",function(){var n=null;before(function(r){e.customActions.get(t.Name).then(function(e){n=e,r()})});var r="updated title - "+Date.now();it("Should update the property",function(t){e.customActions.update({Name:n.Name,Title:r}).then(function(){e.customActions.get(n.Name).then(function(e){e.Title.should.equal(r),t()})})})}),describe("dao.customActions.remove(name)",function(){var n=0;before(function(r){e.customActions.get().then(function(e){n=e.filter(function(e){return e.Name===t.Name}).length,r()}).catch(function(e){console.log(e),r()})}),it("Should remove all custom actions with that name",function(n){e.customActions.remove(t.Name).then(function(){e.customActions.get().then(function(e){var r=e.filter(function(e){return e.Name===t.Name});r.should.be.empty(),n()})})})}),describe("dao.customActions.addScriptLink(name, url)",function(){var t="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js",n="SPScriptJSTest-Web";before(function(r){e.customActions.addScriptLink(n,t).then(function(){r()})}),it("Should add a custom action with that name and ScriptBlock with specified URL",function(r){e.customActions.get(n).then(function(e){e.should.have.property("Name"),e.Name.should.equal(n),e.should.have.property("ScriptBlock"),e.ScriptBlock.should.contain(t),r()})}),after(function(t){e.customActions.remove(n).then(function(){t()})})}),describe("dao.customActions.addScriptLink(name, url, opts)",function(){var t="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js",n="SPScriptJSTest-Site",r={Sequence:25,Group:"Custom Group"};before(function(o){e.customActions.addScriptLink(n,t,r).then(function(){o()})}),it("Should add a custom action with that name and ScriptBlock with specified URL",function(o){e.customActions.get(n).then(function(e){e.should.have.property("Name"),e.Name.should.equal(n),e.should.have.property("ScriptBlock"),e.ScriptBlock.should.contain(t),e.should.have.property("Group"),e.Group.should.equal(r.Group),e.should.have.property("Sequence"),e.Sequence.should.equal(25),o()})}),after(function(t){e.customActions.remove(n).then(function(){t()})})}),describe("dao.customActions.addCSSLink(name, url)",function(){var t="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css",n="SPScriptCSSTest-Web";before(function(r){e.customActions.addCSSLink(n,t).then(function(){r()})}),it("Should add a custom action with that name and ScriptBlock containing specified URL",function(r){e.customActions.get(n).then(function(e){e.should.have.property("Name"),e.Name.should.equal(n),e.should.have.property("ScriptBlock"),e.ScriptBlock.should.contain(t),r()})}),after(function(t){e.customActions.remove(n).then(function(){t()})})}),describe("dao.customActions.addCSSLink(name, url, opts)",function(){var t="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css",n="SPScriptCSSTest-Site",r={Sequence:50,Group:"Custom Group"};before(function(o){e.customActions.addCSSLink(n,t,r).then(function(){o()})}),it("Should add a custom action with that name and ScriptBlock containing specified URL with Site scope",function(o){e.customActions.get(n).then(function(e){e.should.have.property("Name"),e.Name.should.equal(n),e.should.have.property("ScriptBlock"),e.ScriptBlock.should.contain(t),e.should.have.property("Group"),e.Group.should.equal(r.Group),e.should.have.property("Sequence"),e.Sequence.should.equal(50),o()})}),after(function(t){e.customActions.remove(n).then(function(){t()})})})})}},function(e,t,n){"use strict";t.run=function(e,t){console.log("SPScript Env: "+e._env);n(2).should();describe("Global Namespaces",function(){it("Should have a 'SPScript.createContext()' method",function(){e.should.have.property("createContext"),e.createContext.should.be.a("function")}),it("Should have a 'SPScript.utils' namespace",function(){e.should.not.be.null,e.should.have.property("utils")})}),n(34).run(e);var r=e.createContext();n(41).run(r),n(37).run(r),n(39).run(r),n(35).run(r),n(38).run(r),n(40).run(e.utils)}},function(e,t,n){"use strict";function r(){return!("undefined"==typeof window)}var o=n(28);n(2).should();t.run=function(e){describe("var list = ctx.lists(listname)",function(){this.timeout(1e4);var t=e.lists("TestList");describe("list.info()",function(){var e=null;before(function(n){t.getInfo().then(function(t){e=t,n()})}),it("Should return a promise that resolves to list info",function(){e.should.be.an("object")}),it("Should bring back list info like Title, ItemCount, and ListItemEntityTypeFullName",function(){e.should.have.property("Title"),e.should.have.property("ItemCount"),e.should.have.property("ListItemEntityTypeFullName")})}),describe("list.getItems()",function(){var e=null;before(function(n){t.getItems().then(function(t){e=t,n()})}),it("Should return a promise that resolves to an array of items",function(){e.should.be.an("array")}),it("Should return all the items in the list",function(n){t.getInfo().then(function(t){e.length.should.equal(t.ItemCount),n()})})}),describe("list.getItems(odata)",function(){var e="$filter=MyStatus eq 'Green'",n=null;before(function(r){t.getItems(e).then(function(e){n=e,r()})}),it("Should return a promise that resolves to an array of items",function(){n.should.be.an("array")}),it("Should return only items that match the OData params",function(){n.forEach(function(e){e.should.have.property("MyStatus"),e.MyStatus.should.equal("Green")})})}),describe("list.getItemById(id)",function(){var e=null,n=-1;before(function(r){t.getItems().then(function(e){return n=e[0].Id}).then(function(e){return t.getItemById(e)}).then(function(t){e=t,r()})}),it("Should return a promise that resolves to a single item",function(){e.should.be.an("object"),e.should.have.property("Title")}),it("Should resolve an item with a matching ID",function(){e.should.have.property("Id"),e.Id.should.equal(n)}),it("Should be able to return attachments using the optional odata query",function(e){t.getItemById(n,"$expand=AttachmentFiles").then(function(t){t.should.have.property("AttachmentFiles"),t.AttachmentFiles.should.have.property("results"),t.AttachmentFiles.results.should.be.an("Array"),e()})})}),describe("list.findItems(key, value)",function(){var e=null;before(function(n){t.findItems("MyStatus","Green").then(function(t){e=t,n()})}),it("Should return a promise that resolves to an array of list items",function(){e.should.be.an("array"),e.should.not.be.empty}),it("Should only bring back items the match the key value query",function(){e.forEach(function(e){e.should.have.property("MyStatus"),e.MyStatus.should.equal("Green")})})}),describe("list.findItem(key, value)",function(){var e=null;before(function(n){t.findItem("MyStatus","Green").then(function(t){e=t,n()})}),it("Should resolve to one list item",function(){e.should.be.an("object")}),it("Should only bring back an item if it matches the key value query",function(){e.should.have.property("MyStatus"),e.MyStatus.should.equal("Green")})}),describe("list.addItem()",function(){var e={Title:"Test Created Item",MyStatus:"Red"},n=null;before(function(r){t.addItem(e).then(function(e){n=e,r()}).catch(function(e){console.log(e),r()})}),it("Should return a promise that resolves with the new list item",function(){n.should.not.be.null,n.should.be.an("object"),n.should.have.property("Id")}),it("Should save the item right away so it can be queried.",function(){t.getItemById(n.Id).then(function(t){t.should.not.be.null,t.should.have.property("Title"),t.Title.should.equal(e.Title)})}),it("Should throw an error if a invalid field is set",function(n){e.InvalidColumn="test",t.addItem(e).then(function(){"one".should.equal("two")}).catch(function(e,t,r){n()})})}),describe("list.deleteItem(id)",function(){var e=null;before(function(n){t.getItems("$orderby=Id").then(function(n){return e=n[n.length-1],t.deleteItem(e.Id)}).then(function(){n()}).catch(function(e){n(e)})}),it("Should delete that item",function(n){t.getItemById(e.Id).then(function(){throw"Should have failed because item has been deleted"}).catch(function(){n()})}),it("Should reject the promise if the item id can not be found",function(e){t.deleteItem(99999999).then(function(){throw"Should have failed because id doesnt exist"}).catch(function(){e()})})}),describe("list.updateItem()",function(){var e=null,n={Title:"Updated Title"};before(function(n){t.getItems("$orderby=Id desc").then(function(t){e=t[t.length-1],n()})}),it("Should return a promise",function(r){t.updateItem(e.Id,n).then(function(){r()})}),it("Should update only the properties that were passed",function(r){t.getItemById(e.Id).then(function(e){e.should.have.property("Title"),e.Title.should.equal(n.Title),r()})})}),describe("list.permissions.getRoleAssignments()",o.create(t)),r()&&describe("list.permissions.check()",o.create(t,"check")),describe("list.permissions.check(email)",o.create(t,"check","andrew@andrewpetersen.onmicrosoft.com"))})}},function(e,t,n){"use strict";n(2).should();t.run=function(e){console.log("HERE I AM"),describe("var profiles = ctx.profiles",function(){this.timeout(5e3),describe("ctx.profiles.current()",function(){var t=null;before(function(n){e.profiles.current().then(function(e){t=e,console.log(t),n()})}),it("Should return a promise that resolves to a profile properties object",function(){t.should.be.an("object"),t.should.have.property("AccountName"),t.should.have.property("Email"),t.should.have.property("PreferredName")}),it("Should return the profile of the current user",function(){t.should.have.property("Email"),t.Email.should.equal(_spPageContextInfo.userEmail)})}),describe("ctx.profiles.get()",function(){var t=null;before(function(n){e.profiles.get().then(function(e){t=e,n()})}),it("Should return a promise that resolves to a profile properties object",function(){t.should.be.an("object"),t.should.have.property("AccountName"),t.should.have.property("Email"),t.should.have.property("PreferredName")}),it("Should return the profile of the current user",function(){t.should.have.property("Email"),t.Email.should.equal(_spPageContextInfo.userEmail)})}),describe("ctx.profiles.get(email)",function(){var t="andrew@andrewpetersen.onmicrosoft.com",n=null;before(function(r){e.profiles.get(t).then(function(e){n=e,r()}).catch(function(e){r(e)})}),it("Should return a promise that resolves to a profile properties object",function(){n.should.be.an("object"),n.should.have.property("AccountName"),n.should.have.property("Email"),n.should.have.property("PreferredName")}),it("Should give you the matching person",function(){n.should.have.property("Email"),n.Email.should.equal(t)}),it("Should reject the promise for an invalid email",function(t){e.profiles.get("invalid@invalid123.com").then(function(e){t("The request should have failed.")}).catch(function(){t()})})}),describe("ctx.profiles.get({ AccountName })",function(){var t="andrew@andrewpetersen.onmicrosoft.com",n="i:0#.f|membership|andrew@andrewpetersen.onmicrosoft.com",r=null;before(function(t){e.profiles.get({AccountName:n}).then(function(e){r=e,t()}).catch(function(e){t(e)})}),it("Should return a promise that resolves to a profile properties object",function(){r.should.be.an("object"),r.should.have.property("AccountName"),r.should.have.property("Email"),r.should.have.property("PreferredName")}),it("Should give you the matching person",function(){r.should.have.property("Email"),r.Email.should.equal(t)}),it("Should reject the promise for an invalid account name",function(t){e.profiles.get({AccountName:"Invalid"}).then(function(e){t("The request should have failed.")}).catch(function(){t()})})}),describe("ctx.profiles.get({ LoginName })",function(){var t="andrew@andrewpetersen.onmicrosoft.com",n="i:0#.f|membership|andrew@andrewpetersen.onmicrosoft.com",r=null;before(function(t){e.profiles.get({LoginName:n}).then(function(e){r=e,t()}).catch(function(e){t(e)})}),it("Should return a promise that resolves to a profile properties object",function(){r.should.be.an("object"),r.should.have.property("AccountName"),r.should.have.property("Email"),r.should.have.property("PreferredName")}),it("Should give you the matching person",function(){r.should.have.property("Email"),r.Email.should.equal(t)}),it("Should reject the promise for an invalid account name",function(t){e.profiles.get({LoginName:"Invalid"}).then(function(e){t("The request should have failed.")}).catch(function(){t()})})}),describe("ctx.profiles.setProperty(propertyName, propertyValue)",function(){it("Should update the About Me profile property of the current user",function(t){var n="Hi there. I was updated with SPScript 1";e.profiles.setProperty("AboutMe",n).then(function(){return e.profiles.current()}).then(function(e){e.should.have.property("AboutMe"),e.AboutMe.should.equal(n),t()}).catch(function(e){t(e)})})}),describe("ctx.profiles.setProperty(propertyName, propertyValue, email)",function(){var t="andrew@andrewpetersen.onmicrosoft.com";it("Should update the About Me profile property based on the specified email",function(n){var r="Hi there. I was updated with SPScript 2";e.profiles.setProperty("AboutMe",r,t).then(function(){return e.profiles.get(t)}).then(function(e){e.should.have.property("AboutMe"),e.AboutMe.should.equal(r),n()}).catch(function(e){n(e)})})}),describe("ctx.profiles.setProperty(propertyName, propertyValue, { AccountName|LoginName })",function(){var t="i:0#.f|membership|andrew@andrewpetersen.onmicrosoft.com";it("Should update the About Me profile property of the passed in User object",function(n){var r="Hi there. I was updated with SPScript 3";e.profiles.setProperty("AboutMe",r,{AccountName:t}).then(function(){return e.profiles.get({AccountName:t})}).then(function(e){e.should.have.property("AboutMe"),e.AboutMe.should.equal(r),n()}).catch(function(e){n(e)})})})})}},function(e,t,n){"use strict";n(2).should();t.run=function(e){describe("var search = ctx.search;",function(){this.timeout(5e3),describe("ctx.search.query(queryText)",function(){it("Should return promise that resolves to a SearchResults object",function(t){var n="andrew";e.search.query(n).then(function(e){e.should.be.an("object"),e.should.have.property("resultsCount"),e.should.have.property("totalResults"),e.should.have.property("items"),e.should.have.property("refiners"),e.items.should.be.an("array"),e.items.should.not.be.empty,t()})})}),describe("ctx.search.query(queryText, queryOptions)",function(){it("Should obey the extra query options that were passed",function(t){var n="andrew",r={rowLimit:1};e.search.query(n,r).then(function(e){e.should.be.an("object"),e.should.have.property("resultsCount"),e.should.have.property("totalResults"),e.should.have.property("items"),e.should.have.property("refiners"),e.items.should.be.an("array"),e.items.should.not.be.empty,e.items.length.should.equal(1),t()})})}),describe("ctx.search.query(queryText, queryOptions) - w/ Refiners",function(){it("Should return SearchResults that include a refiners array",function(t){var n="FileType",r="andrew",o={refiners:n};e.search.query(r,o).then(function(e){e.should.be.an("object"),e.should.have.property("refiners"),e.refiners.should.not.be.empty;var r=e.refiners[0];r.should.have.property("RefinerName"),r.should.have.property("RefinerOptions"),r.RefinerName.should.equal(n),r.RefinerOptions.should.be.an("array"),t()})})}),describe("ctx.search.people(queryText)",function(){it("Should only return search results that are people",function(t){var n="andrew";e.search.people(n).then(function(e){e.should.be.an("object"),e.should.have.property("items"),e.items.should.be.an("array"),e.items.should.not.be.empty;var n=e.items[0];n.should.have.property("AccountName"),n.should.have.property("PreferredName"),n.should.have.property("AboutMe"),n.should.have.property("WorkEmail"),n.should.have.property("PictureURL"),t()})})}),describe("ctx.search.sites(queryText, scope)",function(){it("Should only return search results that are sites",function(t){var n="";e.search.sites(n).then(function(e){e.should.be.an("object"),e.should.have.property("items"),e.items.should.be.an("array"),e.items.should.not.be.empty();for(var n,r=0;r<e.items.length;r++)n=e.items[r],n.should.have.property("Path"),n.should.have.property("contentclass"),n.contentclass.should.equal("STS_Web");t()})}),it("Should only return sites underneath the specified scope",function(t){var n="https://andrewpetersen.sharepoint.com/sites/ep";e.search.sites("",n).then(function(e){e.should.be.an("object"),e.should.have.property("items"),e.items.should.be.an("array"),e.items.should.not.be.empty();for(var r,o=0;o<e.items.length;o++)r=e.items[o],r.should.have.property("Path"),r.Path.indexOf(n).should.equal(0),r.should.have.property("contentclass"),r.contentclass.should.equal("STS_Web");t()})})})})}},function(e,t,n){"use strict";n(2).should();t.run=function(e){describe("var utils = SPScript.utils",function(){describe("utils.parseJSON(data)",function(){it("Should exist on the utils object",function(){e.should.have.property("parseJSON"),e.parseJSON.should.be.a("function")}),it("Should take a string or an object and return an object",function(){var t={one:"value of one",two:"value of two"},n=JSON.stringify(t),r=e.parseJSON(t);r.should.not.be.null,r.should.have.property("one"),r.one.should.equal(t.one);var o=e.parseJSON(n);o.should.not.be.null,o.should.have.property("one"),o.one.should.equal(t.one)})}),describe("utils.qs.toObj(str)",function(){it("Should take in a string in the form of key=value&key2=value and return an Object",function(){var t="key1=value1",n="key1=value1&key2=value2",r=e.qs.toObj(t);r.should.have.property("key1"),r.key1.should.equal("value1");var o=e.qs.toObj(n);o.should.have.property("key1"),o.should.have.property("key2"),o.key2.should.equal("value2")}),it("Should support an optional leading '?' ",function(){var t="?key1=value1",n=e.qs.toObj(t);n.should.have.property("key1"),n.key1.should.equal("value1")}),it("Should default to 'window.location.search' if no value is passed")}),describe("utils.qs.fromObj(obj, quoteValues?)",function(){it("Should turn { key1: 'value1', key2: 'value2' } into 'key1=value1&key2=value2'",function(){var t={key1:"value1",key2:"value2"},n=e.qs.fromObj(t);n.should.equal("key1=value1&key2=value2")}),it("Should put single quotes around words with spaces",function(){var t={key1:"my value"},n=e.qs.fromObj(t);n.should.equal("key1='my value'")}),it("Should put single quotes around every value is an optional 'quoteValues' param is set to true",function(){var t={key1:"value1",key2:"value2"},n=e.qs.fromObj(t,!0);n.should.equal("key1='value1'&key2='value2'")})}),describe("utils.headers.getStandardHeaders(digest?)",function(){var t="application/json;odata=verbose";it("Should set the Accept header",function(){var n=e.headers.getStandardHeaders();n.should.have.property("Accept"),n.Accept.should.equal(t)}),it("Should set the Request Digest if a digest is passed",function(){var n="123Fake",r=e.headers.getStandardHeaders(n);r.should.have.property("Accept"),r.Accept.should.equal(t),r.should.have.property("X-RequestDigest"),r["X-RequestDigest"].should.equal(n)})}),describe("utils.headers.getAddHeaders(digest)",function(){var t="application/json;odata=verbose";it("Should set the Request Digest if a digest is passed",function(){var n="123Fake",r=e.headers.getAddHeaders(n);r.should.have.property("Accept"),r.Accept.should.equal(t),r.should.have.property("X-RequestDigest"),r["X-RequestDigest"].should.equal(n)})}),describe("utils.headers.getUpdateHeaders(digest)",function(){var t="application/json;odata=verbose";it("Should set X-HTTP-Method to MERGE and include X-RequestDigest",function(){var n="123Fake",r=e.headers.getUpdateHeaders(n);r.should.have.property("Accept"),r.Accept.should.equal(t),r.should.have.property("X-RequestDigest"),r["X-RequestDigest"].should.equal(n),r.should.have.property("X-HTTP-Method"),r["X-HTTP-Method"].should.equal("MERGE")})}),describe("utils.headers.getDeleteHeaders(digest)",function(){var t="application/json;odata=verbose";it("Should set X-HTTP-Method to DELETE and include X-RequestDigest",function(){var n="123Fake",r=e.headers.getDeleteHeaders(n);r.should.have.property("Accept"),r.Accept.should.equal(t),r.should.have.property("X-RequestDigest"),r["X-RequestDigest"].should.equal(n),r.should.have.property("X-HTTP-Method"),r["X-HTTP-Method"].should.equal("DELETE")})})})}},function(e,t,n){"use strict";function r(){return!("undefined"==typeof window)}var o=n(28);n(2).should();t.run=function(e){describe("var web = dao.web",function(){this.timeout(5e3),describe("web.getInfo()",function(){it("Should return a promise that resolves to web info",function(t){e.web.getInfo().then(function(e){e.should.have.property("Url"),e.should.have.property("Title"),t()}).catch(function(e){console.log(e)})})}),describe("web.getSubsites()",function(){it("Should return a promise that resolves to an array of subsite web infos.",function(t){e.web.getSubsites().then(function(e){e.should.be.an("array"),e.length&&(e[0].should.have.property("Title"),e[0].should.have.property("ServerRelativeUrl")),t()})})}),describe("web.getUser()",function(){var t=null;before(function(n){e.web.getUser().then(function(e){t=e,n()})}),it("Should return a promise that resolves to a user object",function(){t.should.not.be.null,t.should.have.property("Id"),t.should.have.property("LoginName"),t.should.have.property("Email")}),it("Should return the current user",function(){t.should.have.property("Id"),t.Id.should.equal(_spPageContextInfo.userId)})}),describe("web.getUser(email)",function(){var t="andrew@andrewpetersen.onmicrosoft.com",n=null;before(function(r){e.web.getUser(t).then(function(e){n=e,r()})}),it("Should return a promise that resolves to a user object",function(){n.should.not.be.null,n.should.have.property("Id"),n.should.have.property("LoginName"),n.should.have.property("Email")}),it("Should return a user whose email matches the specified email",function(){n.should.have.property("Email"),n.Email.should.equal(t)})});var t="/spscript/Shared Documents",n="testfile.txt",i=t+"/"+n;describe("web.getFile(serverRelativeFileUrl)",function(){var t=null;before(function(n){e.web.getFile(i).then(function(e){t=e,n()})}),it("Should return a promise that resolves to a file object",function(){t.should.not.be.null,t.should.property("CheckOutType"),t.should.property("ETag"),t.should.property("Exists"),t.should.property("TimeLastModified"),t.should.property("Name"),t.should.property("UIVersionLabel")})});var s="/spscript/Shared%20Documents/testfile2.txt";describe("web.copyFile(serverRelativeSourceUrl, serverRelativeDestUrl)",function(){var t=(new Date,null);before(function(n){e.web.copyFile(i,s).then(function(){return e.web.getFile(s)}).then(function(e){t=e,n()}).catch(function(e){"one".should.equal("two","Error in CopyFile requst"),n()})}),it("Should return a promise, and once resolved, the new (copied) file should be retrievable.",function(){t.should.not.be.null,t.should.property("CheckOutType"),t.should.property("ETag"),t.should.property("Exists"),t.should.property("TimeLastModified"),t.should.property("Name"),t.should.property("UIVersionLabel")})}),describe("web.permissions.getRoleAssignments()",o.create(e.web)),r()&&describe("web.permissions.check()",o.create(e.web,"check")),describe("web.permissions.check(email)",o.create(e.web,"check","andrew@andrewpetersen.onmicrosoft.com"))})}},function(e,t){"use strict";function n(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function r(e){return 3*e.length/4-n(e)}function o(e){var t,r,o,i,s,a,u=e.length;s=n(e),a=new h(3*u/4-s),o=s>0?u-4:u;var l=0;for(t=0,r=0;t<o;t+=4,r+=3)i=c[e.charCodeAt(t)]<<18|c[e.charCodeAt(t+1)]<<12|c[e.charCodeAt(t+2)]<<6|c[e.charCodeAt(t+3)],a[l++]=i>>16&255,a[l++]=i>>8&255,a[l++]=255&i;return 2===s?(i=c[e.charCodeAt(t)]<<2|c[e.charCodeAt(t+1)]>>4,a[l++]=255&i):1===s&&(i=c[e.charCodeAt(t)]<<10|c[e.charCodeAt(t+1)]<<4|c[e.charCodeAt(t+2)]>>2,a[l++]=i>>8&255,a[l++]=255&i),a}function i(e){return u[e>>18&63]+u[e>>12&63]+u[e>>6&63]+u[63&e]}function s(e,t,n){for(var r,o=[],s=t;s<n;s+=3)r=(e[s]<<16)+(e[s+1]<<8)+e[s+2],o.push(i(r));return o.join("")}function a(e){for(var t,n=e.length,r=n%3,o="",i=[],a=16383,c=0,h=n-r;c<h;c+=a)i.push(s(e,c,c+a>h?h:c+a));return 1===r?(t=e[n-1],o+=u[t>>2],o+=u[t<<4&63],o+="=="):2===r&&(t=(e[n-2]<<8)+e[n-1],o+=u[t>>10],o+=u[t>>4&63],o+=u[t<<2&63],o+="="),i.push(o),i.join("")}t.byteLength=r,t.toByteArray=o,t.fromByteArray=a;for(var u=[],c=[],h="undefined"!=typeof Uint8Array?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,d=l.length;f<d;++f)u[f]=l[f],c[l.charCodeAt(f)]=f;c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},function(e,t,n){(function(e){/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
"use strict";function r(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}function o(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return s.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=s.prototype):(null===e&&(e=new s(t)),e.length=t),e}function s(e,t,n){if(!(s.TYPED_ARRAY_SUPPORT||this instanceof s))return new s(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return h(this,e)}return a(this,e,t,n)}function a(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?d(e,t,n,r):"string"==typeof t?l(e,t,n):p(e,t)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function c(e,t,n,r){return u(t),t<=0?i(e,t):void 0!==n?"string"==typeof r?i(e,t).fill(n,r):i(e,t).fill(n):i(e,t)}function h(e,t){if(u(t),e=i(e,t<0?0:0|v(t)),!s.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function l(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!s.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|m(t,n);e=i(e,r);var o=e.write(t,n);return o!==r&&(e=e.slice(0,o)),e}function f(e,t){var n=t.length<0?0:0|v(t.length);e=i(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function d(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),s.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=s.prototype):e=f(e,t),e}function p(e,t){if(s.isBuffer(t)){var n=0|v(t.length);return e=i(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||$(t.length)?i(e,0):f(e,t);if("Buffer"===t.type&&Z(t.data))return f(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function v(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function y(e){return+e!=e&&(e=0),s.alloc(+e)}function m(e,t){if(s.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return G(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return X(e).length;default:if(r)return G(e).length;t=(""+t).toLowerCase(),r=!0}}function g(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return q(this,t,n);case"utf8":case"utf-8":return O(this,t,n);case"ascii":return R(this,t,n);case"latin1":case"binary":return I(this,t,n);case"base64":return P(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function b(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function w(e,t,n,r,o){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=s.from(t,r)),s.isBuffer(t))return 0===t.length?-1:S(e,t,n,r,o);if("number"==typeof t)return t&=255,s.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):S(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function S(e,t,n,r,o){function i(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}var s=1,a=e.length,u=t.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,u/=2,n/=2}var c;if(o){var h=-1;for(c=n;c<a;c++)if(i(e,c)===i(t,h===-1?0:c-h)){if(h===-1&&(h=c),c-h+1===u)return h*s}else h!==-1&&(c-=c-h),h=-1}else for(n+u>a&&(n=a-u),c=n;c>=0;c--){for(var l=!0,f=0;f<u;f++)if(i(e,c+f)!==i(t,f)){l=!1;break}if(l)return c}return-1}function A(e,t,n,r){n=Number(n)||0;var o=e.length-n;r?(r=Number(r),r>o&&(r=o)):r=o;var i=t.length;if(i%2!==0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[n+s]=a}return s}function x(e,t,n,r){return W(G(t,e.length-n),e,n,r)}function _(e,t,n,r){return W(z(t),e,n,r)}function j(e,t,n,r){return _(e,t,n,r)}function T(e,t,n,r){return W(X(t),e,n,r)}function E(e,t,n,r){return W(J(t,e.length-n),e,n,r)}function P(e,t,n){return 0===t&&n===e.length?Q.fromByteArray(e):Q.fromByteArray(e.slice(t,n))}function O(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var i=e[o],s=null,a=i>239?4:i>223?3:i>191?2:1;if(o+a<=n){var u,c,h,l;switch(a){case 1:i<128&&(s=i);break;case 2:u=e[o+1],128===(192&u)&&(l=(31&i)<<6|63&u,l>127&&(s=l));break;case 3:u=e[o+1],c=e[o+2],128===(192&u)&&128===(192&c)&&(l=(15&i)<<12|(63&u)<<6|63&c,l>2047&&(l<55296||l>57343)&&(s=l));break;case 4:u=e[o+1],c=e[o+2],h=e[o+3],128===(192&u)&&128===(192&c)&&128===(192&h)&&(l=(15&i)<<18|(63&u)<<12|(63&c)<<6|63&h,l>65535&&l<1114112&&(s=l))}}null===s?(s=65533,a=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),o+=a}return k(r)}function k(e){var t=e.length;if(t<=ee)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=ee));return n}function R(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function I(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function q(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=t;i<n;++i)o+=V(e[i]);return o}function M(e,t,n){for(var r=e.slice(t,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function N(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function U(e,t,n,r,o,i){if(!s.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function C(e,t,n,r){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-n,2);o<i;++o)e[n+o]=(t&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function D(e,t,n,r){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-n,4);o<i;++o)e[n+o]=t>>>8*(r?o:3-o)&255}function L(e,t,n,r,o,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function B(e,t,n,r,o){return o||L(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),K.write(e,t,n,r,23,4),n+4}function F(e,t,n,r,o){return o||L(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),K.write(e,t,n,r,52,8),n+8}function H(e){if(e=Y(e).replace(te,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function Y(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function V(e){return e<16?"0"+e.toString(16):e.toString(16)}function G(e,t){t=t||1/0;for(var n,r=e.length,o=null,i=[],s=0;s<r;++s){if(n=e.charCodeAt(s),n>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),o=n;continue}n=(o-55296<<10|n-56320)+65536}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function z(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function J(e,t){for(var n,r,o,i=[],s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),r=n>>8,o=n%256,i.push(o),i.push(r);return i}function X(e){return Q.toByteArray(H(e))}function W(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function $(e){return e!==e}var Q=n(42),K=n(65),Z=n(66);t.Buffer=s,t.SlowBuffer=y,t.INSPECT_MAX_BYTES=50,s.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:r(),t.kMaxLength=o(),s.poolSize=8192,s._augment=function(e){return e.__proto__=s.prototype,e},s.from=function(e,t,n){return a(null,e,t,n)},s.TYPED_ARRAY_SUPPORT&&(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0})),s.alloc=function(e,t,n){return c(null,e,t,n)},s.allocUnsafe=function(e){return h(null,e)},s.allocUnsafeSlow=function(e){return h(null,e)},s.isBuffer=function(e){return!(null==e||!e._isBuffer)},s.compare=function(e,t){if(!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!Z(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return s.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=s.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var i=e[n];if(!s.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,o),o+=i.length}return r},s.byteLength=m,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)b(this,t,t+1);return this},s.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)b(this,t,t+3),b(this,t+1,t+2);return this},s.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)b(this,t,t+7),b(this,t+1,t+6),b(this,t+2,t+5),b(this,t+3,t+4);return this},s.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?O(this,0,e):g.apply(this,arguments)},s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===s.compare(this,e)},s.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},s.prototype.compare=function(e,t,n,r,o){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,o>>>=0,this===e)return 0;for(var i=o-r,a=n-t,u=Math.min(i,a),c=this.slice(r,o),h=e.slice(t,n),l=0;l<u;++l)if(c[l]!==h[l]){i=c[l],a=h[l];break}return i<a?-1:a<i?1:0},s.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1},s.prototype.indexOf=function(e,t,n){return w(this,e,t,n,!0)},s.prototype.lastIndexOf=function(e,t,n){return w(this,e,t,n,!1)},s.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return A(this,e,t,n);case"utf8":case"utf-8":return x(this,e,t,n);case"ascii":return _(this,e,t,n);case"latin1":case"binary":return j(this,e,t,n);case"base64":return T(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ee=4096;s.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);var r;if(s.TYPED_ARRAY_SUPPORT)r=this.subarray(e,t),r.__proto__=s.prototype;else{var o=t-e;r=new s(o,void 0);for(var i=0;i<o;++i)r[i]=this[i+e]}return r},s.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r},s.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=this[e+--t],o=1;t>0&&(o*=256);)r+=this[e+--t]*o;return r},s.prototype.readUInt8=function(e,t){return t||N(e,1,this.length),this[e]},s.prototype.readUInt16LE=function(e,t){return t||N(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUInt16BE=function(e,t){return t||N(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUInt32LE=function(e,t){return t||N(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUInt32BE=function(e,t){return t||N(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*t)),r},s.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=t,o=1,i=this[e+--r];r>0&&(o*=256);)i+=this[e+--r]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i},s.prototype.readInt8=function(e,t){return t||N(e,1,this.length),128&this[e]?(255-this[e]+1)*-1:this[e]},s.prototype.readInt16LE=function(e,t){t||N(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(e,t){t||N(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(e,t){return t||N(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return t||N(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readFloatLE=function(e,t){return t||N(e,4,this.length),K.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return t||N(e,4,this.length),K.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return t||N(e,8,this.length),K.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return t||N(e,8,this.length),K.read(this,e,!1,52,8)},s.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){var o=Math.pow(2,8*n)-1;U(this,e,t,n,o,0)}var i=1,s=0;for(this[t]=255&e;++s<n&&(i*=256);)this[t+s]=e/i&255;return t+n},s.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){var o=Math.pow(2,8*n)-1;U(this,e,t,n,o,0)}var i=n-1,s=1;for(this[t+i]=255&e;--i>=0&&(s*=256);)this[t+i]=e/s&255;return t+n},s.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||U(this,e,t,1,255,0),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},s.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||U(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):C(this,e,t,!0),t+2},s.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||U(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):C(this,e,t,!1),t+2},s.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||U(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):D(this,e,t,!0),t+4},s.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||U(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},s.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);U(this,e,t,n,o-1,-o)}var i=0,s=1,a=0;for(this[t]=255&e;++i<n&&(s*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+n},s.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);U(this,e,t,n,o-1,-o)}var i=n-1,s=1,a=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+n},s.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||U(this,e,t,1,127,-128),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||U(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):C(this,e,t,!0),t+2},s.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||U(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):C(this,e,t,!1),t+2},s.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||U(this,e,t,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):D(this,e,t,!0),t+4},s.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||U(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},s.prototype.writeFloatLE=function(e,t,n){return B(this,e,t,!0,n)},s.prototype.writeFloatBE=function(e,t,n){return B(this,e,t,!1,n)},s.prototype.writeDoubleLE=function(e,t,n){return F(this,e,t,!0,n)},s.prototype.writeDoubleBE=function(e,t,n){return F(this,e,t,!1,n)},s.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o,i=r-n;if(this===e&&n<t&&t<r)for(o=i-1;o>=0;--o)e[o+t]=this[o+n];else if(i<1e3||!s.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+i),t);return i},s.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!s.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var i;if("number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{var a=s.isBuffer(e)?e:G(new s(e,r).toString()),u=a.length;for(i=0;i<n-t;++i)this[i+t]=a[i%u]}return this};var te=/[^+\/0-9A-Za-z-_]/g}).call(t,function(){return this}())},function(e,t,n){/*!
	 * chai
	 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
var r=[],t=e.exports={};/*!
	 * Chai version
	 */
t.version="1.10.0",/*!
	 * Assertion Error
	 */
t.AssertionError=n(33);/*!
	 * Utils for plugins (not exported)
	 */
var o=n(57);t.use=function(e){return~r.indexOf(e)||(e(this,o),r.push(e)),this};/*!
	 * Configuration
	 */
var i=n(4);t.config=i;/*!
	 * Primary `Assertion` prototype
	 */
var s=n(45);t.use(s);/*!
	 * Core Assertions
	 */
var a=n(46);t.use(a);/*!
	 * Expect interface
	 */
var u=n(48);t.use(u);/*!
	 * Should interface
	 */
var c=n(49);t.use(c);/*!
	 * Assert interface
	 */
var h=n(47);t.use(h)},function(e,t,n){/*!
	 * chai
	 * http://chaijs.com
	 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
var r=n(4),o=function(){};e.exports=function(e,t){/*!
	   * Assertion Constructor
	   *
	   * Creates object for chaining.
	   *
	   * @api private
	   */
function n(e,t,n){s(this,"ssfi",n||arguments.callee),s(this,"object",e),s(this,"message",t)}/*!
	   * Module dependencies.
	   */
var i=e.AssertionError,s=t.flag;/*!
	   * Module export.
	   */
e.Assertion=n,Object.defineProperty(n,"includeStack",{get:function(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),r.includeStack},set:function(e){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),r.includeStack=e}}),Object.defineProperty(n,"showDiff",{get:function(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),r.showDiff},set:function(e){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),r.showDiff=e}}),n.addProperty=function(e,n){t.addProperty(this.prototype,e,n)},n.addMethod=function(e,n){t.addMethod(this.prototype,e,n)},n.addChainableMethod=function(e,n,r){t.addChainableMethod(this.prototype,e,n,r)},n.addChainableNoop=function(e,n){t.addChainableMethod(this.prototype,e,o,n)},n.overwriteProperty=function(e,n){t.overwriteProperty(this.prototype,e,n)},n.overwriteMethod=function(e,n){t.overwriteMethod(this.prototype,e,n)},n.overwriteChainableMethod=function(e,n,r){t.overwriteChainableMethod(this.prototype,e,n,r)},/*!
	   * ### .assert(expression, message, negateMessage, expected, actual)
	   *
	   * Executes an expression and check expectations. Throws AssertionError for reporting if test doesn't pass.
	   *
	   * @name assert
	   * @param {Philosophical} expression to be tested
	   * @param {String or Function} message or function that returns message to display if fails
	   * @param {String or Function} negatedMessage or function that returns negatedMessage to display if negated expression fails
	   * @param {Mixed} expected value (remember to check for negation)
	   * @param {Mixed} actual (optional) will default to `this.obj`
	   * @api private
	   */
n.prototype.assert=function(e,n,o,a,u,c){var h=t.test(this,arguments);if(!0!==c&&(c=!1),!0!==r.showDiff&&(c=!1),!h){var n=t.getMessage(this,arguments),l=t.getActual(this,arguments);throw new i(n,{actual:l,expected:a,showDiff:c},r.includeStack?this.assert:s(this,"ssfi"))}},/*!
	   * ### ._obj
	   *
	   * Quick reference to stored `actual` value for plugin developers.
	   *
	   * @api private
	   */
Object.defineProperty(n.prototype,"_obj",{get:function(){return s(this,"object")},set:function(e){s(this,"object",e)}})}},function(e,t){/*!
	 * chai
	 * http://chaijs.com
	 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
e.exports=function(e,t){function n(e,n){n&&w(this,"message",n),e=e.toLowerCase();var r=w(this,"object"),o=~["a","e","i","o","u"].indexOf(e.charAt(0))?"an ":"a ";this.assert(e===t.type(r),"expected #{this} to be "+o+e,"expected #{this} not to be "+o+e)}function r(){w(this,"contains",!0)}function o(e,n){n&&w(this,"message",n);var r=w(this,"object"),o=!1;if("array"===t.type(r)&&"object"===t.type(e)){for(var i in r)if(t.eql(r[i],e)){o=!0;break}}else if("object"===t.type(e)){if(!w(this,"negate")){for(var s in e)new b(r).property(s,e[s]);return}var a={};for(var s in e)a[s]=r[s];o=t.eql(a,e)}else o=r&&~r.indexOf(e);this.assert(o,"expected #{this} to include "+t.inspect(e),"expected #{this} to not include "+t.inspect(e))}function i(){var e=w(this,"object"),t=Object.prototype.toString.call(e);this.assert("[object Arguments]"===t,"expected #{this} to be arguments but got "+t,"expected #{this} to not be arguments")}function s(e,t){t&&w(this,"message",t);var n=w(this,"object");return w(this,"deep")?this.eql(e):void this.assert(e===n,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",e,this._obj,!0)}function a(e,n){n&&w(this,"message",n),this.assert(t.eql(e,w(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",e,this._obj,!0)}function u(e,t){t&&w(this,"message",t);var n=w(this,"object");if(w(this,"doLength")){new b(n,t).to.have.property("length");var r=n.length;this.assert(r>e,"expected #{this} to have a length above #{exp} but got #{act}","expected #{this} to not have a length above #{exp}",e,r)}else this.assert(n>e,"expected #{this} to be above "+e,"expected #{this} to be at most "+e)}function c(e,t){t&&w(this,"message",t);var n=w(this,"object");if(w(this,"doLength")){new b(n,t).to.have.property("length");var r=n.length;this.assert(r>=e,"expected #{this} to have a length at least #{exp} but got #{act}","expected #{this} to have a length below #{exp}",e,r)}else this.assert(n>=e,"expected #{this} to be at least "+e,"expected #{this} to be below "+e)}function h(e,t){t&&w(this,"message",t);var n=w(this,"object");if(w(this,"doLength")){new b(n,t).to.have.property("length");var r=n.length;this.assert(r<e,"expected #{this} to have a length below #{exp} but got #{act}","expected #{this} to not have a length below #{exp}",e,r)}else this.assert(n<e,"expected #{this} to be below "+e,"expected #{this} to be at least "+e)}function l(e,t){t&&w(this,"message",t);var n=w(this,"object");if(w(this,"doLength")){new b(n,t).to.have.property("length");var r=n.length;this.assert(r<=e,"expected #{this} to have a length at most #{exp} but got #{act}","expected #{this} to have a length above #{exp}",e,r)}else this.assert(n<=e,"expected #{this} to be at most "+e,"expected #{this} to be above "+e)}function f(e,n){n&&w(this,"message",n);var r=t.getName(e);this.assert(w(this,"object")instanceof e,"expected #{this} to be an instance of "+r,"expected #{this} to not be an instance of "+r)}function d(e,n){n&&w(this,"message",n);var r=w(this,"object");this.assert(r.hasOwnProperty(e),"expected #{this} to have own property "+t.inspect(e),"expected #{this} to not have own property "+t.inspect(e))}function p(){w(this,"doLength",!0)}function v(e,t){t&&w(this,"message",t);var n=w(this,"object");new b(n,t).to.have.property("length");var r=n.length;this.assert(r==e,"expected #{this} to have a length of #{exp} but got #{act}","expected #{this} to not have a length of #{act}",e,r)}function y(e){var n,r=w(this,"object"),o=!0;if(e=e instanceof Array?e:Array.prototype.slice.call(arguments),!e.length)throw new Error("keys required");var i=Object.keys(r),s=e,a=e.length;if(o=e.every(function(e){return~i.indexOf(e)}),w(this,"negate")||w(this,"contains")||(o=o&&e.length==i.length),a>1){e=e.map(function(e){return t.inspect(e)});var u=e.pop();n=e.join(", ")+", and "+u}else n=t.inspect(e[0]);n=(a>1?"keys ":"key ")+n,n=(w(this,"contains")?"contain ":"have ")+n,this.assert(o,"expected #{this} to "+n,"expected #{this} to not "+n,s.sort(),i.sort(),!0)}function m(e,n,r){r&&w(this,"message",r);var o=w(this,"object");new b(o,r).is.a("function");var i=!1,s=null,a=null,u=null;0===arguments.length?(n=null,e=null):e&&(e instanceof RegExp||"string"==typeof e)?(n=e,e=null):e&&e instanceof Error?(s=e,e=null,n=null):"function"==typeof e?(a=e.prototype.name||e.name,"Error"===a&&e!==Error&&(a=(new e).name)):e=null;try{o()}catch(r){if(s)return this.assert(r===s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}",s instanceof Error?s.toString():s,r instanceof Error?r.toString():r),w(this,"object",r),this;if(e&&(this.assert(r instanceof e,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp} but #{act} was thrown",a,r instanceof Error?r.toString():r),!n))return w(this,"object",r),this;var c="object"===t.type(r)&&"message"in r?r.message:""+r;if(null!=c&&n&&n instanceof RegExp)return this.assert(n.exec(c),"expected #{this} to throw error matching #{exp} but got #{act}","expected #{this} to throw error not matching #{exp}",n,c),w(this,"object",r),this;if(null!=c&&n&&"string"==typeof n)return this.assert(~c.indexOf(n),"expected #{this} to throw error including #{exp} but got #{act}","expected #{this} to throw error not including #{act}",n,c),w(this,"object",r),this;i=!0,u=r}var h="",l=null!==a?a:s?"#{exp}":"an error";i&&(h=" but #{act} was thrown"),this.assert(i===!0,"expected #{this} to throw "+l+h,"expected #{this} to not throw "+l+h,s instanceof Error?s.toString():s,u instanceof Error?u.toString():u),w(this,"object",u)}function g(e,t,n){return e.every(function(e){return n?t.some(function(t){return n(e,t)}):t.indexOf(e)!==-1})}var b=e.Assertion,w=(Object.prototype.toString,t.flag);["to","be","been","is","and","has","have","with","that","at","of","same"].forEach(function(e){b.addProperty(e,function(){return this})}),b.addProperty("not",function(){w(this,"negate",!0)}),b.addProperty("deep",function(){w(this,"deep",!0)}),b.addChainableMethod("an",n),b.addChainableMethod("a",n),b.addChainableMethod("include",o,r),b.addChainableMethod("contain",o,r),b.addChainableNoop("ok",function(){this.assert(w(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")}),b.addChainableNoop("true",function(){this.assert(!0===w(this,"object"),"expected #{this} to be true","expected #{this} to be false",!this.negate)}),b.addChainableNoop("false",function(){this.assert(!1===w(this,"object"),"expected #{this} to be false","expected #{this} to be true",!!this.negate)}),b.addChainableNoop("null",function(){this.assert(null===w(this,"object"),"expected #{this} to be null","expected #{this} not to be null")}),b.addChainableNoop("undefined",function(){this.assert(void 0===w(this,"object"),"expected #{this} to be undefined","expected #{this} not to be undefined")}),b.addChainableNoop("exist",function(){this.assert(null!=w(this,"object"),"expected #{this} to exist","expected #{this} to not exist")}),b.addChainableNoop("empty",function(){var e=w(this,"object"),t=e;Array.isArray(e)||"string"==typeof object?t=e.length:"object"==typeof e&&(t=Object.keys(e).length),this.assert(!t,"expected #{this} to be empty","expected #{this} not to be empty")}),b.addChainableNoop("arguments",i),b.addChainableNoop("Arguments",i),b.addMethod("equal",s),b.addMethod("equals",s),b.addMethod("eq",s),b.addMethod("eql",a),b.addMethod("eqls",a),b.addMethod("above",u),b.addMethod("gt",u),b.addMethod("greaterThan",u),b.addMethod("least",c),b.addMethod("gte",c),b.addMethod("below",h),b.addMethod("lt",h),b.addMethod("lessThan",h),b.addMethod("most",l),b.addMethod("lte",l),b.addMethod("within",function(e,t,n){n&&w(this,"message",n);var r=w(this,"object"),o=e+".."+t;if(w(this,"doLength")){new b(r,n).to.have.property("length");var i=r.length;this.assert(i>=e&&i<=t,"expected #{this} to have a length within "+o,"expected #{this} to not have a length within "+o)}else this.assert(r>=e&&r<=t,"expected #{this} to be within "+o,"expected #{this} to not be within "+o)}),b.addMethod("instanceof",f),b.addMethod("instanceOf",f),b.addMethod("property",function(e,n,r){r&&w(this,"message",r);var o=w(this,"deep")?"deep property ":"property ",i=w(this,"negate"),s=w(this,"object"),a=w(this,"deep")?t.getPathValue(e,s):s[e];if(i&&void 0!==n){if(void 0===a)throw r=null!=r?r+": ":"",new Error(r+t.inspect(s)+" has no "+o+t.inspect(e))}else this.assert(void 0!==a,"expected #{this} to have a "+o+t.inspect(e),"expected #{this} to not have "+o+t.inspect(e));void 0!==n&&this.assert(n===a,"expected #{this} to have a "+o+t.inspect(e)+" of #{exp}, but got #{act}","expected #{this} to not have a "+o+t.inspect(e)+" of #{act}",n,a),w(this,"object",a)}),b.addMethod("ownProperty",d),b.addMethod("haveOwnProperty",d),b.addChainableMethod("length",v,p),b.addMethod("lengthOf",v),b.addMethod("match",function(e,t){t&&w(this,"message",t);var n=w(this,"object");this.assert(e.exec(n),"expected #{this} to match "+e,"expected #{this} not to match "+e)}),b.addMethod("string",function(e,n){n&&w(this,"message",n);var r=w(this,"object");new b(r,n).is.a("string"),this.assert(~r.indexOf(e),"expected #{this} to contain "+t.inspect(e),"expected #{this} to not contain "+t.inspect(e))}),b.addMethod("keys",y),b.addMethod("key",y),b.addMethod("throw",m),b.addMethod("throws",m),b.addMethod("Throw",m),b.addMethod("respondTo",function(e,n){n&&w(this,"message",n);var r=w(this,"object"),o=w(this,"itself"),i="function"!==t.type(r)||o?r[e]:r.prototype[e];this.assert("function"==typeof i,"expected #{this} to respond to "+t.inspect(e),"expected #{this} to not respond to "+t.inspect(e))}),b.addProperty("itself",function(){w(this,"itself",!0)}),b.addMethod("satisfy",function(e,n){n&&w(this,"message",n);var r=w(this,"object"),o=e(r);this.assert(o,"expected #{this} to satisfy "+t.objDisplay(e),"expected #{this} to not satisfy"+t.objDisplay(e),!this.negate,o)}),b.addMethod("closeTo",function(e,n,r){r&&w(this,"message",r);var o=w(this,"object");if(new b(o,r).is.a("number"),"number"!==t.type(e)||"number"!==t.type(n))throw new Error("the arguments to closeTo must be numbers");this.assert(Math.abs(o-e)<=n,"expected #{this} to be close to "+e+" +/- "+n,"expected #{this} not to be close to "+e+" +/- "+n)}),b.addMethod("members",function(e,n){n&&w(this,"message",n);var r=w(this,"object");new b(r).to.be.an("array"),new b(e).to.be.an("array");var o=w(this,"deep")?t.eql:void 0;return w(this,"contains")?this.assert(g(e,r,o),"expected #{this} to be a superset of #{act}","expected #{this} to not be a superset of #{act}",r,e):void this.assert(g(r,e,o)&&g(e,r,o),"expected #{this} to have the same members as #{act}","expected #{this} to not have the same members as #{act}",r,e)})}},function(module,exports){/*!
	 * chai
	 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
module.exports=function(chai,util){/*!
	   * Chai dependencies.
	   */
var Assertion=chai.Assertion,flag=util.flag,assert=chai.assert=function(e,t){var n=new Assertion(null,null,chai.assert);n.assert(e,t,"[ negation message unavailable ]")};assert.fail=function(e,t,n,r){throw n=n||"assert.fail()",new chai.AssertionError(n,{actual:e,expected:t,operator:r},assert.fail)},assert.ok=function(e,t){new Assertion(e,t).is.ok},assert.notOk=function(e,t){new Assertion(e,t).is.not.ok},assert.equal=function(e,t,n){var r=new Assertion(e,n,assert.equal);r.assert(t==flag(r,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",t,e)},assert.notEqual=function(e,t,n){var r=new Assertion(e,n,assert.notEqual);r.assert(t!=flag(r,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",t,e)},assert.strictEqual=function(e,t,n){new Assertion(e,n).to.equal(t)},assert.notStrictEqual=function(e,t,n){new Assertion(e,n).to.not.equal(t)},assert.deepEqual=function(e,t,n){new Assertion(e,n).to.eql(t)},assert.notDeepEqual=function(e,t,n){new Assertion(e,n).to.not.eql(t)},assert.isTrue=function(e,t){new Assertion(e,t).is.true},assert.isFalse=function(e,t){new Assertion(e,t).is.false},assert.isNull=function(e,t){new Assertion(e,t).to.equal(null)},assert.isNotNull=function(e,t){new Assertion(e,t).to.not.equal(null)},assert.isUndefined=function(e,t){new Assertion(e,t).to.equal(void 0)},assert.isDefined=function(e,t){new Assertion(e,t).to.not.equal(void 0)},assert.isFunction=function(e,t){new Assertion(e,t).to.be.a("function")},assert.isNotFunction=function(e,t){new Assertion(e,t).to.not.be.a("function")},assert.isObject=function(e,t){new Assertion(e,t).to.be.a("object")},assert.isNotObject=function(e,t){new Assertion(e,t).to.not.be.a("object")},assert.isArray=function(e,t){new Assertion(e,t).to.be.an("array")},assert.isNotArray=function(e,t){new Assertion(e,t).to.not.be.an("array")},assert.isString=function(e,t){new Assertion(e,t).to.be.a("string")},assert.isNotString=function(e,t){new Assertion(e,t).to.not.be.a("string")},assert.isNumber=function(e,t){new Assertion(e,t).to.be.a("number")},assert.isNotNumber=function(e,t){new Assertion(e,t).to.not.be.a("number")},assert.isBoolean=function(e,t){new Assertion(e,t).to.be.a("boolean")},assert.isNotBoolean=function(e,t){new Assertion(e,t).to.not.be.a("boolean")},assert.typeOf=function(e,t,n){new Assertion(e,n).to.be.a(t)},assert.notTypeOf=function(e,t,n){new Assertion(e,n).to.not.be.a(t)},assert.instanceOf=function(e,t,n){new Assertion(e,n).to.be.instanceOf(t)},assert.notInstanceOf=function(e,t,n){new Assertion(e,n).to.not.be.instanceOf(t)},assert.include=function(e,t,n){new Assertion(e,n,assert.include).include(t)},assert.notInclude=function(e,t,n){new Assertion(e,n,assert.notInclude).not.include(t)},assert.match=function(e,t,n){new Assertion(e,n).to.match(t)},assert.notMatch=function(e,t,n){new Assertion(e,n).to.not.match(t)},assert.property=function(e,t,n){new Assertion(e,n).to.have.property(t)},assert.notProperty=function(e,t,n){new Assertion(e,n).to.not.have.property(t)},assert.deepProperty=function(e,t,n){new Assertion(e,n).to.have.deep.property(t)},assert.notDeepProperty=function(e,t,n){new Assertion(e,n).to.not.have.deep.property(t)},assert.propertyVal=function(e,t,n,r){new Assertion(e,r).to.have.property(t,n)},assert.propertyNotVal=function(e,t,n,r){new Assertion(e,r).to.not.have.property(t,n)},assert.deepPropertyVal=function(e,t,n,r){new Assertion(e,r).to.have.deep.property(t,n)},assert.deepPropertyNotVal=function(e,t,n,r){new Assertion(e,r).to.not.have.deep.property(t,n)},assert.lengthOf=function(e,t,n){new Assertion(e,n).to.have.length(t)},assert.Throw=function(e,t,n,r){("string"==typeof t||t instanceof RegExp)&&(n=t,t=null);var o=new Assertion(e,r).to.Throw(t,n);return flag(o,"object")},assert.doesNotThrow=function(e,t,n){"string"==typeof t&&(n=t,t=null),new Assertion(e,n).to.not.Throw(t)},assert.operator=function(val,operator,val2,msg){if(!~["==","===",">",">=","<","<=","!=","!=="].indexOf(operator))throw new Error('Invalid operator "'+operator+'"');var test=new Assertion(eval(val+operator+val2),msg);test.assert(!0===flag(test,"object"),"expected "+util.inspect(val)+" to be "+operator+" "+util.inspect(val2),"expected "+util.inspect(val)+" to not be "+operator+" "+util.inspect(val2))},assert.closeTo=function(e,t,n,r){new Assertion(e,r).to.be.closeTo(t,n)},assert.sameMembers=function(e,t,n){new Assertion(e,n).to.have.same.members(t)},assert.includeMembers=function(e,t,n){new Assertion(e,n).to.include.members(t)},/*!
	   * Undocumented / untested
	   */
assert.ifError=function(e,t){new Assertion(e,t).to.not.be.ok},/*!
	   * Aliases.
	   */
function e(t,n){return assert[n]=assert[t],e}("Throw","throw")("Throw","throws")}},function(e,t){/*!
	 * chai
	 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
e.exports=function(e,t){e.expect=function(t,n){return new e.Assertion(t,n)}}},function(e,t){/*!
	 * chai
	 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
e.exports=function(e,t){function n(){function e(){return this instanceof String||this instanceof Number?new r(this.constructor(this),null,e):this instanceof Boolean?new r(1==this,null,e):new r(this,null,e)}function t(e){Object.defineProperty(this,"should",{value:e,enumerable:!0,configurable:!0,writable:!0})}Object.defineProperty(Object.prototype,"should",{set:t,get:e,configurable:!0});var n={};return n.equal=function(e,t,n){new r(e,n).to.equal(t)},n.Throw=function(e,t,n,o){new r(e,o).to.Throw(t,n)},n.exist=function(e,t){new r(e,t).to.exist},n.not={},n.not.equal=function(e,t,n){new r(e,n).to.not.equal(t)},n.not.Throw=function(e,t,n,o){new r(e,o).to.not.Throw(t,n)},n.not.exist=function(e,t){new r(e,t).to.not.exist},n.throw=n.Throw,n.not.throw=n.not.Throw,n}var r=e.Assertion;e.should=n,e.Should=n}},function(e,t,n){/*!
	 * Chai - addChainingMethod utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
/*!
	 * Module dependencies
	 */
var r=n(32),o=n(5),i=n(4),s="__proto__"in Object,a=/^(?:length|name|arguments|caller)$/,u=Function.prototype.call,c=Function.prototype.apply;e.exports=function(e,t,n,h){"function"!=typeof h&&(h=function(){});var l={method:n,chainingBehavior:h};e.__methods||(e.__methods={}),e.__methods[t]=l,Object.defineProperty(e,t,{get:function(){l.chainingBehavior.call(this);var t=function e(){var t=o(this,"ssfi");t&&i.includeStack===!1&&o(this,"ssfi",e);var n=l.method.apply(this,arguments);return void 0===n?this:n};if(s){var n=t.__proto__=Object.create(this);n.call=u,n.apply=c}else{var h=Object.getOwnPropertyNames(e);h.forEach(function(n){if(!a.test(n)){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r)}})}return r(this,t),t},configurable:!0})}},function(e,t,n){/*!
	 * Chai - addMethod utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
var r=n(4),o=n(5);e.exports=function(e,t,n){e[t]=function(){var i=o(this,"ssfi");i&&r.includeStack===!1&&o(this,"ssfi",e[t]);var s=n.apply(this,arguments);return void 0===s?this:s}}},function(e,t){/*!
	 * Chai - addProperty utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
e.exports=function(e,t,n){Object.defineProperty(e,t,{get:function(){var e=n.call(this);return void 0===e?this:e},configurable:!0})}},function(e,t){/*!
	 * Chai - getEnumerableProperties utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
e.exports=function(e){var t=[];for(var n in e)t.push(n);return t}},function(e,t,n){/*!
	 * Chai - message composition utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
/*!
	 * Module dependancies
	 */
var r=n(5),o=n(29),i=(n(20),n(31));e.exports=function(e,t){var n=r(e,"negate"),s=r(e,"object"),a=t[3],u=o(e,t),c=n?t[2]:t[1],h=r(e,"message");return"function"==typeof c&&(c=c()),c=c||"",c=c.replace(/#{this}/g,i(s)).replace(/#{act}/g,i(u)).replace(/#{exp}/g,i(a)),h?h+": "+c:c}},function(e,t){/*!
	 * ## parsePath(path)
	 *
	 * Helper function used to parse string object
	 * paths. Use in conjunction with `_getPathValue`.
	 *
	 *      var parsed = parsePath('myobject.property.subprop');
	 *
	 * ### Paths:
	 *
	 * * Can be as near infinitely deep and nested
	 * * Arrays are also valid using the formal `myobject.document[3].property`.
	 *
	 * @param {String} path
	 * @returns {Object} parsed
	 * @api private
	 */
function n(e){var t=e.replace(/\[/g,".["),n=t.match(/(\\\.|[^.]+?)+/g);return n.map(function(e){var t=/\[(\d+)\]$/,n=t.exec(e);return n?{i:parseFloat(n[1])}:{p:e}})}/*!
	 * ## _getPathValue(parsed, obj)
	 *
	 * Helper companion function for `.parsePath` that returns
	 * the value located at the parsed address.
	 *
	 *      var value = getPathValue(parsed, obj);
	 *
	 * @param {Object} parsed definition from `parsePath`.
	 * @param {Object} object to search against
	 * @returns {Object|Undefined} value
	 * @api private
	 */
function r(e,t){for(var n,r=t,o=0,i=e.length;o<i;o++){var s=e[o];r?("undefined"!=typeof s.p?r=r[s.p]:"undefined"!=typeof s.i&&(r=r[s.i]),o==i-1&&(n=r)):n=void 0}return n}/*!
	 * Chai - getPathValue utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * @see https://github.com/logicalparadox/filtr
	 * MIT Licensed
	 */
e.exports=function(e,t){var o=n(e);return r(o,t)}},function(e,t){/*!
	 * Chai - getProperties utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
e.exports=function(e){function t(e){n.indexOf(e)===-1&&n.push(e)}for(var n=Object.getOwnPropertyNames(subject),r=Object.getPrototypeOf(subject);null!==r;)Object.getOwnPropertyNames(r).forEach(t),r=Object.getPrototypeOf(r);return n}},function(e,t,n){/*!
	 * chai
	 * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
/*!
	 * Main exports
	 */
var t=e.exports={};/*!
	 * test utility
	 */
t.test=n(61),/*!
	 * type utility
	 */
t.type=n(62),/*!
	 * message utility
	 */
t.getMessage=n(54),/*!
	 * actual utility
	 */
t.getActual=n(29),/*!
	 * Inspect util
	 */
t.inspect=n(20),/*!
	 * Object Display util
	 */
t.objDisplay=n(31),/*!
	 * Flag utility
	 */
t.flag=n(5),/*!
	 * Flag transferring utility
	 */
t.transferFlags=n(32),/*!
	 * Deep equal utility
	 */
t.eql=n(63),/*!
	 * Deep path value
	 */
t.getPathValue=n(55),/*!
	 * Function name
	 */
t.getName=n(30),/*!
	 * add Property
	 */
t.addProperty=n(52),/*!
	 * add Method
	 */
t.addMethod=n(51),/*!
	 * overwrite Property
	 */
t.overwriteProperty=n(60),/*!
	 * overwrite Method
	 */
t.overwriteMethod=n(59),/*!
	 * Add a chainable method
	 */
t.addChainableMethod=n(50),/*!
	 * Overwrite chainable method
	 */
t.overwriteChainableMethod=n(58)},function(e,t){/*!
	 * Chai - overwriteChainableMethod utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
e.exports=function(e,t,n,r){var o=e.__methods[t],i=o.chainingBehavior;o.chainingBehavior=function(){var e=r(i).call(this);return void 0===e?this:e};var s=o.method;o.method=function(){var e=n(s).apply(this,arguments);return void 0===e?this:e}}},function(e,t){/*!
	 * Chai - overwriteMethod utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
e.exports=function(e,t,n){var r=e[t],o=function(){return this};r&&"function"==typeof r&&(o=r),e[t]=function(){var e=n(o).apply(this,arguments);return void 0===e?this:e}}},function(e,t){/*!
	 * Chai - overwriteProperty utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
e.exports=function(e,t,n){var r=Object.getOwnPropertyDescriptor(e,t),o=function(){};r&&"function"==typeof r.get&&(o=r.get),Object.defineProperty(e,t,{get:function(){var e=n(o).call(this);return void 0===e?this:e},configurable:!0})}},function(e,t,n){/*!
	 * Chai - test utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
/*!
	 * Module dependancies
	 */
var r=n(5);e.exports=function(e,t){var n=r(e,"negate"),o=t[0];return n?!o:o}},function(e,t){/*!
	 * Chai - type utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
/*!
	 * Detectable javascript natives
	 */
var n={"[object Arguments]":"arguments","[object Array]":"array","[object Date]":"date","[object Function]":"function","[object Number]":"number","[object RegExp]":"regexp","[object String]":"string"};e.exports=function(e){var t=Object.prototype.toString.call(e);return n[t]?n[t]:null===e?"null":void 0===e?"undefined":e===Object(e)?"object":typeof e}},function(e,t,n){e.exports=n(64)},function(e,t,n){function r(e,t,n){return!!o(e,t)||("date"===v(e)?s(e,t):"regexp"===v(e)?a(e,t):p.isBuffer(e)?l(e,t):"arguments"===v(e)?u(e,t,n):!!i(e,t)&&("object"!==v(e)&&"object"!==v(t)&&"array"!==v(e)&&"array"!==v(t)?o(e,t):d(e,t,n)))}/*!
	 * Strict (egal) equality test. Ensures that NaN always
	 * equals NaN and `-0` does not equal `+0`.
	 *
	 * @param {Mixed} a
	 * @param {Mixed} b
	 * @return {Boolean} equal match
	 */
function o(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}/*!
	 * Compare the types of two given objects and
	 * return if they are equal. Note that an Array
	 * has a type of `array` (not `object`) and arguments
	 * have a type of `arguments` (not `array`/`object`).
	 *
	 * @param {Mixed} a
	 * @param {Mixed} b
	 * @return {Boolean} result
	 */
function i(e,t){return v(e)===v(t)}/*!
	 * Compare two Date objects by asserting that
	 * the time values are equal using `saveValue`.
	 *
	 * @param {Date} a
	 * @param {Date} b
	 * @return {Boolean} result
	 */
function s(e,t){return"date"===v(t)&&o(e.getTime(),t.getTime())}/*!
	 * Compare two regular expressions by converting them
	 * to string and checking for `sameValue`.
	 *
	 * @param {RegExp} a
	 * @param {RegExp} b
	 * @return {Boolean} result
	 */
function a(e,t){return"regexp"===v(t)&&o(e.toString(),t.toString())}/*!
	 * Assert deep equality of two `arguments` objects.
	 * Unfortunately, these must be sliced to arrays
	 * prior to test to ensure no bad behavior.
	 *
	 * @param {Arguments} a
	 * @param {Arguments} b
	 * @param {Array} memoize (optional)
	 * @return {Boolean} result
	 */
function u(e,t,n){return"arguments"===v(t)&&(e=[].slice.call(e),t=[].slice.call(t),r(e,t,n))}/*!
	 * Get enumerable properties of a given object.
	 *
	 * @param {Object} a
	 * @return {Array} property names
	 */
function c(e){var t=[];for(var n in e)t.push(n);return t}/*!
	 * Simple equality for flat iterable objects
	 * such as Arrays or Node.js buffers.
	 *
	 * @param {Iterable} a
	 * @param {Iterable} b
	 * @return {Boolean} result
	 */
function h(e,t){if(e.length!==t.length)return!1;for(var n=0,r=!0;n<e.length;n++)if(e[n]!==t[n]){r=!1;break}return r}/*!
	 * Extension to `iterableEqual` specifically
	 * for Node.js Buffers.
	 *
	 * @param {Buffer} a
	 * @param {Mixed} b
	 * @return {Boolean} result
	 */
function l(e,t){return!!p.isBuffer(t)&&h(e,t)}/*!
	 * Block for `objectEqual` ensuring non-existing
	 * values don't get in.
	 *
	 * @param {Mixed} object
	 * @return {Boolean} result
	 */
function f(e){return null!==e&&void 0!==e}/*!
	 * Recursively check the equality of two objects.
	 * Once basic sameness has been established it will
	 * defer to `deepEqual` for each enumerable key
	 * in the object.
	 *
	 * @param {Mixed} a
	 * @param {Mixed} b
	 * @return {Boolean} result
	 */
function d(e,t,n){if(!f(e)||!f(t))return!1;if(e.prototype!==t.prototype)return!1;var o;if(n){for(o=0;o<n.length;o++)if(n[o][0]===e&&n[o][1]===t||n[o][0]===t&&n[o][1]===e)return!0}else n=[];try{var i=c(e),s=c(t)}catch(e){return!1}if(i.sort(),s.sort(),!h(i,s))return!1;n.push([e,t]);var a;for(o=i.length-1;o>=0;o--)if(a=i[o],!r(e[a],t[a],n))return!1;return!0}/*!
	 * deep-eql
	 * Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
/*!
	 * Module dependencies
	 */
var p,v=n(67);try{p=n(43).Buffer}catch(e){p={},p.isBuffer=function(){return!1}}/*!
	 * Primary Export
	 */
e.exports=r},function(e,t){t.read=function(e,t,n,r,o){var i,s,a=8*o-r-1,u=(1<<a)-1,c=u>>1,h=-7,l=n?o-1:0,f=n?-1:1,d=e[t+l];for(l+=f,i=d&(1<<-h)-1,d>>=-h,h+=a;h>0;i=256*i+e[t+l],l+=f,h-=8);for(s=i&(1<<-h)-1,i>>=-h,h+=r;h>0;s=256*s+e[t+l],l+=f,h-=8);if(0===i)i=1-c;else{if(i===u)return s?NaN:(d?-1:1)*(1/0);s+=Math.pow(2,r),i-=c}return(d?-1:1)*s*Math.pow(2,i-r)},t.write=function(e,t,n,r,o,i){var s,a,u,c=8*i-o-1,h=(1<<c)-1,l=h>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:i-1,p=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=h):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),t+=s+l>=1?f/u:f*Math.pow(2,1-l),t*u>=2&&(s++,u/=2),s+l>=h?(a=0,s=h):s+l>=1?(a=(t*u-1)*Math.pow(2,o),s+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,o),s=0));o>=8;e[n+d]=255&a,d+=p,a/=256,o-=8);for(s=s<<o|a,c+=o;c>0;e[n+d]=255&s,d+=p,s/=256,c-=8);e[n+d-p]|=128*v}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){e.exports=n(68)},function(e,t){function n(e){var t=Object.prototype.toString.call(e);return o[t]?o[t]:null===e?"null":void 0===e?"undefined":e===Object(e)?"object":typeof e}function r(){this.tests={}}/*!
	 * type-detect
	 * Copyright(c) 2013 jake luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
/*!
	 * Primary Exports
	 */
var t=e.exports=n,o={"[object Array]":"array","[object RegExp]":"regexp","[object Function]":"function","[object Arguments]":"arguments","[object Date]":"date"};t.Library=r,r.prototype.of=n,r.prototype.define=function(e,t){return 1===arguments.length?this.tests[e]:(this.tests[e]=t,this)},r.prototype.test=function(e,t){if(t===n(e))return!0;var r=this.tests[t];if(r&&"regexp"===n(r))return r.test(e);if(r&&"function"===n(r))return r(e);throw new ReferenceError('Type test "'+t+'" not defined or invalid.')}}]);
//# sourceMappingURL=tests.js.map