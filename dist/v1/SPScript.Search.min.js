SPScript=window.SPScript||{},function(t){var e={};e.validateODataV2=function(t,e){var r=t;return t.d&&t.d.results&&null!=t.d.results.length?r=t.d.results:t.d&&(r=t.d),e?void e.resolve(r):r},e.validateCrossDomainODataV2=function(t,e){var r=$.parseJSON(t.body);SPScript.helpers.validateODataV2(r,e)},t.helpers=e}(SPScript),SPScript=window.SPScript||{},function(t){var e=null,r=function(t,r){this.listname=t,e="/web/lists/getbytitle('"+t+"')",this._dao=r};r.prototype.getItems=function(r){var n=null!=r?"?"+r:"";return this._dao.get(e+"/items"+n).then(t.helpers.validateODataV2)},r.prototype.getItemById=function(r){var n=e+"/items("+r+")";return this._dao.get(n).then(t.helpers.validateODataV2)},r.prototype.info=function(){return this._dao.get(e).then(t.helpers.validateODataV2)},r.prototype.addItem=function(t){var r=this;return r._dao.get(e).then(function(n){t=$.extend({__metadata:{type:n.d.ListItemEntityTypeFullName}},t);var i={headers:{Accept:"application/json;odata=verbose","X-RequestDigest":$("#__REQUESTDIGEST").val()}};return r._dao.post(e+"/items",t,i)})},r.prototype.updateItem=function(t,e){var r=this;return r.getItemById(t).then(function(t){e=$.extend({__metadata:{type:t.__metadata.type}},e);var n={headers:{Accept:"application/json;odata=verbose","X-RequestDigest":$("#__REQUESTDIGEST").val(),"X-HTTP-Method":"MERGE","If-Match":t.__metadata.etag}};return r._dao.post(url,e,n)})},r.prototype.findItems=function(t,e){var r="string"==typeof e?"'"+e+"'":e,n="$filter="+t+" eq "+r;return this.getItems(n)},r.prototype.findItem=function(t,e){return this.findItems(t,e).then(function(t){return t&&t.length&&t.length>0?t[0]:null})},t.List=r}(SPScript),SPScript=window.SPScript||{},function(t){var e="/web",r=function(t){this._dao=t};r.prototype.info=function(){return this._dao.get(e).then(t.helpers.validateODataV2)},r.prototype.subsites=function(){return this._dao.get(e+"/webinfos").then(t.helpers.validateODataV2)},t.Web=r}(SPScript),SPScript=window.SPScript||{},function(t){var e=function(){var e=this;e.web=new t.Web(e)};e.prototype.executeRequest=function(){throw"Not implemented exception"},e.prototype.get=function(t,e){var r={method:"GET"};return e&&$.extend(r,e),this.executeRequest(t,r)},e.prototype.lists=function(e){return e?new t.List(e,this):this.get("/web/lists").then(t.helpers.validateODataV2)},e.prototype.post=function(t,e,r){var n=JSON.stringify(e),i={method:"POST",data:n,contentType:"application/json;odata=verbose"};return $.extend(i,r),this.executeRequest(t,i)},e.prototype.uploadFile=function(t,e,r){var n="/web/GetFolderByServerRelativeUrl('"+t+"')/Files/Add(url='"+e+"',overwrite=true)",i={binaryStringRequestBody:!0,state:"Update"};return this.post(n,r,i)},t.BaseDao=e}(SPScript),SPScript=window.SPScript||{},function(t){var e=function(e){t.BaseDao.call(this),this.webUrl=e};e.prototype=new SPScript.BaseDao,e.prototype.executeRequest=function(t,e){var r=new $.Deferred,n=function(t){e.success?e.success(t,r):r.resolve(t)},i=function(t,n,i){e.error?e.error(t,n,i,r):r.reject(i)},s=this.webUrl+"/_api"+t,o={url:s,method:"GET",headers:{Accept:"application/json; odata=verbose"},success:n,error:i};return $.extend(o,e),$.ajax(o),r.promise()},t.RestDao=e}(SPScript),SPScript=window.SPScript||{},function(t){t.queryString={_queryString:{},_processed:!1,_processQueryString:function(t){for(var e,r=t||window.location.search.substring(1),n=r.split("&"),i=0;i<n.length;i++)e=n[i].split("="),this._queryString[e[0]]=decodeURIComponent(e[1].replace(/\+/g," "));this._processed=!0},contains:function(t,e){return this._processed||this._processQueryString(e),this._queryString.hasOwnProperty(t)},getValue:function(t,e){return this._processed||this._processQueryString(e),this.contains(t)?this._queryString[t]:""},getAll:function(t){return this._processed||this._processQueryString(t),this._queryString},objectToQueryString:function(t,e){var r=[];for(var n in t)value=t[n],null!==value&&r.push(e?encodeURIComponent(n)+"='"+encodeURIComponent(value)+"'":encodeURIComponent(n)+"="+encodeURIComponent(value));return r.join("&")}}}(SPScript),SPScript=window.SPScript||{},function(t){var e=function(t){this.dao=new SPScript.RestDao(t),this.webUrl=t};e.QueryOptions=function(){this.sourceid=null,this.startrow=null,this.rowlimit=30,this.selectedproperties=null,this.refiners=null,this.refinementfilters=null,this.hiddenconstraints=null,this.sortlist=null};var r=function(t){for(var e=[],r=0;r<t.length;r++){for(var n=t[r],i={},s=0;s<n.Cells.results.length;s++)i[n.Cells.results[s].Key]=n.Cells.results[s].Value;e.push(i)}return e},n=function(t){this.elapsedTime=t.ElapsedTime,this.suggestion=t.SpellingSuggestion,this.resultsCount=t.PrimaryQueryResult.RelevantResults.RowCount,this.totalResults=t.PrimaryQueryResult.RelevantResults.TotalRows,this.totalResultsIncludingDuplicates=t.PrimaryQueryResult.RelevantResults.TotalRowsIncludingDuplicates,this.items=r(t.PrimaryQueryResult.RelevantResults.Table.Rows.results)};e.prototype.query=function(t,e){var r=this,i=null!=e?"&"+SPScript.queryString.objectToQueryString(e,!0):"",s=new $.Deferred,o="/search/query?querytext='"+t+"'"+i,a=r.dao.get(o);return a.done(function(t){if(t.d&&t.d.query){var e=new n(t.d.query);s.resolve(e)}else s.reject(t)}),s.promise()},t.Search=e}(SPScript);