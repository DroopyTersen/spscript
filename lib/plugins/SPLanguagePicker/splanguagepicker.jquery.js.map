{"version":3,"sources":["../../../src/plugins/SPLanguagePicker/splanguagepicker.jquery.js"],"names":["$","sp","window","getSPLanguage","languageCode","spLanguagePickerValue","localStorage","getItem","pluginName","SPLanguagePicker","element","options","_defaults","webUrl","_spPageContextInfo","webAbsoluteUrl","_name","extend","$elem","_dao","init","prototype","bindEvents","on","changeLanguage","bind","self","setUserLanguage","then","trigger","fail","value","val","index","inArray","rawUserLanguages","setItem","splice","unshift","userLanguages","getMappedLanguagesByCode","profiles","setProperty","profile","join","getUserLanguages","current","langStr","console","log","split","map","lang","trim","setToUsersLanguage","length","setDropdownValue","code","getMappedLanguagesByLcid","ids","lcid","allLanguages","filter","id","codes","matches","forEach","i","regEx","RegExp","search","push","getLanguageOptions","get","helpers","validateODataV2","data","localeIds","SupportedUILanguageIds","results","renderOptions","languages","html","display","RestDao","arguments","fn","each","jQuery","SPScript"],"mappings":"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","file":"splanguagepicker.jquery.js","sourcesContent":["(function ($, sp) {\r\n\t//create a global function for other webparts to use to get language code\r\n\twindow.getSPLanguage = function() {\r\n\t\tvar languageCode = window.spLanguagePickerValue || window.localStorage.getItem(\"spLanguagePickerValue\");\r\n\t\treturn languageCode || \"en-US\";\r\n\t};\r\n\t\r\n\tvar pluginName = \"spLanguagePicker\";\r\n\tvar SPLanguagePicker = function (element, options) {\r\n\t\tthis._defaults = {\r\n\t\t\twebUrl: _spPageContextInfo.webAbsoluteUrl\r\n\t\t};\r\n\t\tthis._name = pluginName;\r\n\t\tthis.options = $.extend(this._defaults, options);\r\n\t\tthis.$elem = $(element);\r\n\t\tthis._dao = null;\r\n\t\tthis.init();\r\n\t};\r\n\t\r\n\tSPLanguagePicker.prototype.bindEvents = function() {\r\n\t\tthis.$elem.on(\"change\", this.changeLanguage.bind(this));\r\n\t\treturn true;\r\n\t};\r\n\t\r\n\tSPLanguagePicker.prototype.changeLanguage = function() {\r\n\t\tvar self = this;\r\n\t\tself.setUserLanguage().then(function(){\r\n\t\t\tself.$elem.trigger(\"language-change\");\r\n\t\t}).fail(function() {\r\n\t\t\tself.$elem.trigger(\"language-change\");\r\n\t\t});;\r\n\t};\r\n\t\r\n\tSPLanguagePicker.prototype.setUserLanguage = function() {\r\n\t\t// 1. Get language to set\r\n\t\tvar value = this.$elem.val();\r\n\t\tvar index = $.inArray(value, this.rawUserLanguages);\r\n\t\twindow.spLanguagePickerValue = value;\r\n\t\twindow.localStorage.setItem('spLanguagePickerValue', value);\r\n\t\t\r\n\t\t// 2. If it is already in the list of user languages remove it\r\n\t\tif (index > -1 ) {\r\n\t\t\tthis.rawUserLanguages.splice(index, 1);\r\n\t\t}\r\n\t\t// 3. Insert the chosen language as #1\r\n\t\tthis.rawUserLanguages.unshift(value);\r\n\t\t\r\n\t\tthis.userLanguages = getMappedLanguagesByCode(this.rawUserLanguages);\r\n\t\t// 4. set profile property\r\n\t\treturn this._dao.profiles.setProperty(this.profile,  \"SPS-MUILanguages\", this.rawUserLanguages.join(\",\"));\r\n\t};\r\n\r\n\tSPLanguagePicker.prototype.getUserLanguages = function() {\r\n\t\tvar self = this;\r\n\t\treturn self._dao.profiles.current().then(function(profile){\r\n\t\t\tvar langStr = profile[\"SPS-MUILanguages\"];\r\n\t\t\tself.profile = profile;\r\n\t\t\tconsole.log(profile);\r\n\t\t\tself.rawUserLanguages = langStr.split(\",\").map(function(lang){ return lang.trim(); });\r\n\t\t\tself.userLanguages = getMappedLanguagesByCode(self.rawUserLanguages);\r\n\t\t});\r\n\t};\r\n\t\r\n\tSPLanguagePicker.prototype.setToUsersLanguage = function() {\r\n\t\tif (this.userLanguages.length) {\r\n\t\t\tthis.setDropdownValue(this.userLanguages[0]);\r\n\t\t\twindow.spLanguagePickerValue = this.userLanguages[0].code;\r\n\t\t\twindow.localStorage.setItem('spLanguagePickerValue', this.userLanguages[0].code);\r\n\t\t}\r\n\t};\r\n\t\r\n\tSPLanguagePicker.prototype.setDropdownValue = function(lang) {\r\n\t\tthis.$elem.val(lang.code);\r\n\t};\r\n\t\r\n\tvar getMappedLanguagesByLcid = function(ids) {\r\n\t\tids = ids.map(function(lcid) { return lcid + \"\"; });\r\n\t\treturn allLanguages.filter(function(lang){\r\n\t\t\tvar index = $.inArray(lang.id, ids);\r\n\t\t\treturn (index > -1);\r\n\t\t});\r\n\t};\r\n\t\r\n\tvar getMappedLanguagesByCode = function(codes) {\r\n\t\tvar matches = [];\r\n\t\tcodes.forEach(function(code){\r\n\t\t\tfor (var i = 0; i < allLanguages.length; i++) {\r\n\t\t\t\t//check for if language starts with\r\n\t\t\t\tvar regEx = new RegExp(\"^\" + code.split(\"-\")[0], \"i\");\r\n\t\t\t\tif (allLanguages[i].code.search(regEx) > -1) {\r\n\t\t\t\t\tmatches.push(allLanguages[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn matches;\r\n\t};\r\n\t\r\n\tSPLanguagePicker.prototype.getLanguageOptions = function () {\r\n\t\treturn this._dao.get(\"/web/supportedUILanguageIds\")\r\n\t\t\t.then(sp.helpers.validateODataV2)\r\n\t\t\t.then(function (data) {\r\n\t\t\t\tvar localeIds = data.SupportedUILanguageIds.results;\r\n\t\t\t\tconsole.log(localeIds);\r\n\t\t\t\tvar options = getMappedLanguagesByLcid(localeIds);\r\n\t\t\t\treturn options;\r\n\t\t\t});\r\n\t};\r\n\r\n\tSPLanguagePicker.prototype.renderOptions = function(languages) {\r\n\t\tvar html = \"\";\r\n\t\tlanguages.forEach(function(lang){\r\n\t\t\thtml += \"<option data-id='\" + lang.id + \"' value='\" + lang.code + \"'>\" + lang.display + \"</option>\";\r\n\t\t})\r\n\t\tthis.$elem.html(html);\r\n\t\treturn languages;\r\n\t};\r\n\t\r\n\tSPLanguagePicker.prototype.init = function () {\r\n\t\tvar self = this;\r\n\t\tself._dao = new sp.RestDao(self.options.webUrl);\r\n\t\tself.getLanguageOptions()\r\n\t\t\t.then(self.renderOptions.bind(self))\r\n\t\t\t.then(self.getUserLanguages.bind(self))\r\n\t\t\t.then(self.setToUsersLanguage.bind(self))\r\n\t\t\t.then(self.bindEvents.bind(self))\r\n\t\t\t.fail(function() {\r\n\t\t\t\tconsole.log(\"ERROR setting up SPLanguagePicker\");\r\n\t\t\t\tconsole.log(arguments);\r\n\t\t\t});\r\n\t};\r\n\r\n\t$.fn[pluginName] = function (options) {\r\n\t\treturn this.each(function () {\r\n\t\t\treturn new SPLanguagePicker(this, options);\r\n\t\t});\r\n\t};\r\n\r\n\tvar allLanguages = [\r\n\t\t{\r\n\t\t\t\"id\": \"1033\",\r\n\t\t\t\"display\": \"English\",\r\n\t\t\t\"code\": \"en-US\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"1025\",\r\n\t\t\t\"display\": \"Arabic\",\r\n\t\t\t\"code\": \"ar-SA\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"1026\",\r\n\t\t\t\"display\": \"Bulgarian\",\r\n\t\t\t\"code\": \"bg-BG\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"1027\",\r\n\t\t\t\"display\": \"Catalan\",\r\n\t\t\t\"code\": \"ca-ES\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"1028\",\r\n\t\t\t\"display\": \"Chinese (Traditional)\",\r\n\t\t\t\"code\": \"zh-TW\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"1029\",\r\n\t\t\t\"display\": \"Czech\",\r\n\t\t\t\"code\": \"cs-CZ\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"1030\",\r\n\t\t\t\"display\": \"Danish\",\r\n\t\t\t\"code\": \"da-DK\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"1031\",\r\n\t\t\t\"display\": \"German\",\r\n\t\t\t\"code\": \"de-DE\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"1032\",\r\n\t\t\t\"display\": \"Greek\",\r\n\t\t\t\"code\": \"el-GR\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"1035\",\r\n\t\t\t\"display\": \"Finnish\",\r\n\t\t\t\"code\": \"fi-FI\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"1036\",\r\n\t\t\t\"display\": \"French\",\r\n\t\t\t\"code\": \"fr-FR\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"1037\",\r\n\t\t\t\"display\": \"Hebrew\",\r\n\t\t\t\"code\": \"he-IL\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"1038\",\r\n\t\t\t\"display\": \"Hungarian\",\r\n\t\t\t\"code\": \"hu-HU\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"1040\",\r\n\t\t\t\"display\": \"Italian\",\r\n\t\t\t\"code\": \"it-IT\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"1041\",\r\n\t\t\t\"display\": \"Japanese\",\r\n\t\t\t\"code\": \"ja-JP\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"1042\",\r\n\t\t\t\"display\": \"Korean\",\r\n\t\t\t\"code\": \"ko-KR\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"1043\",\r\n\t\t\t\"display\": \"Dutch\",\r\n\t\t\t\"code\": \"nl-NL\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"1044\",\r\n\t\t\t\"display\": \"Norwegian (Bokmål)\",\r\n\t\t\t\"code\": \"nb-NO\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"1045\",\r\n\t\t\t\"display\": \"Polish\",\r\n\t\t\t\"code\": \"pl-PL\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"1046\",\r\n\t\t\t\"display\": \"Portuguese (Brazil)\",\r\n\t\t\t\"code\": \"pt-BR\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"1048\",\r\n\t\t\t\"display\": \"Romanian\",\r\n\t\t\t\"code\": \"ro-RO\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"1049\",\r\n\t\t\t\"display\": \"Russian\",\r\n\t\t\t\"code\": \"ru-RU\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"1050\",\r\n\t\t\t\"display\": \"Croatian\",\r\n\t\t\t\"code\": \"hr-HR\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"1051\",\r\n\t\t\t\"display\": \"Slovak\",\r\n\t\t\t\"code\": \"sk-SK\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"1053\",\r\n\t\t\t\"display\": \"Swedish\",\r\n\t\t\t\"code\": \"sv-SE\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"1054\",\r\n\t\t\t\"display\": \"Thai\",\r\n\t\t\t\"code\": \"th-TH\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"1055\",\r\n\t\t\t\"display\": \"Turkish\",\r\n\t\t\t\"code\": \"tr-TR\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"1057\",\r\n\t\t\t\"display\": \"Indonesian\",\r\n\t\t\t\"code\": \"id-ID\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"1058\",\r\n\t\t\t\"display\": \"Ukrainian\",\r\n\t\t\t\"code\": \"uk-UA\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"1060\",\r\n\t\t\t\"display\": \"Slovenian\",\r\n\t\t\t\"code\": \"sl-SI\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"1061\",\r\n\t\t\t\"display\": \"Estonian\",\r\n\t\t\t\"code\": \"et-EE\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"1062\",\r\n\t\t\t\"display\": \"Latvian\",\r\n\t\t\t\"code\": \"lv-LV\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"1063\",\r\n\t\t\t\"display\": \"Lithuanian\",\r\n\t\t\t\"code\": \"lt-LT\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"1066\",\r\n\t\t\t\"display\": \"Vietnamese\",\r\n\t\t\t\"code\": \"vi-VN\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"1068\",\r\n\t\t\t\"display\": \"Azerbaijani\",\r\n\t\t\t\"code\": \"az-Latn-AZ\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"1069\",\r\n\t\t\t\"display\": \"Basque\",\r\n\t\t\t\"code\": \"eu-ES\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"1071\",\r\n\t\t\t\"display\": \"Macedonian\",\r\n\t\t\t\"code\": \"mk-MK\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"1081\",\r\n\t\t\t\"display\": \"Hindi\",\r\n\t\t\t\"code\": \"hi-IN\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"1086\",\r\n\t\t\t\"display\": \"Malay\",\r\n\t\t\t\"code\": \"ms-MY\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"1087\",\r\n\t\t\t\"display\": \"Kazakh\",\r\n\t\t\t\"code\": \"kk-KZ\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"1106\",\r\n\t\t\t\"display\": \"Welsh\",\r\n\t\t\t\"code\": \"cy-GB\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"1110\",\r\n\t\t\t\"display\": \"Galician\",\r\n\t\t\t\"code\": \"gl-ES\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"1164\",\r\n\t\t\t\"display\": \"Dari\",\r\n\t\t\t\"code\": \"prs-AF\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"2052\",\r\n\t\t\t\"display\": \"Chinese (Simplified)\",\r\n\t\t\t\"code\": \"zh-CN\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"2070\",\r\n\t\t\t\"display\": \"Portuguese (Portugal)\",\r\n\t\t\t\"code\": \"pt-PT\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"2074\",\r\n\t\t\t\"display\": \"Serbian (Latin)\",\r\n\t\t\t\"code\": \"sr-Latn-CS\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"2108\",\r\n\t\t\t\"display\": \"Irish\",\r\n\t\t\t\"code\": \"ga-IE\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"3082\",\r\n\t\t\t\"display\": \"Spanish\",\r\n\t\t\t\"code\": \"es-ES\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"5146\",\r\n\t\t\t\"display\": \"Bosnian (Latin)\",\r\n\t\t\t\"code\": \"bs-Latn-BA\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"9242\",\r\n\t\t\t\"display\": \"Serbian (Latin, Serbia)\",\r\n\t\t\t\"code\": \"sr-Latn-RS\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"id\": \"10266\",\r\n\t\t\t\"display\": \"Serbian (Cyrillic, Serbia)\",\r\n\t\t\t\"code\": \"sr-Cyrl-RS\"\r\n\t\t}\r\n\t];\r\n})(jQuery, SPScript)"]}