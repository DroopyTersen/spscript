{"version":3,"sources":["../../../src/plugins/VisibilityManager/index.js"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["//USAGE\r\n// //Create the overall visibility manager\r\n// var visibilityManager = new VisibilityManager();\r\n// //create a checkbox toggle\r\n// var checkboxToggle = visibilityManager.createCheckboxToggle(\"YesNoTest\", [\"Poster\", \"Backdrop\"]);\r\n\r\n// //The radio and dropdown toggle both take in a 'choices' array\r\n// var choices = [\r\n// \t{ value: \"Enter Choice #1\", childFields: [\"ChoiceTestMultiple\", \"ChoiceTestSingle\"] },\r\n// \t{ value: \"Enter Choice #2\", childFields: [\"LookupSingle\", \"LookupMultiple\"] },\r\n// \t{ value: \"Enter Choice #3\", childFields: [\"PersonTest\"] }\r\n// ];\r\n// var radioToggle = visibilityManager.createRadioToggle(\"ChoiceTestRadio\", choices);\r\n// var dropdownToggle = visibilityManager.createDropdownToggle(\"ChoiceTestSingle\", choices);\r\n(function(global) {\r\n\t//Constructor\r\n\tvar VisibilityManager = function() {\r\n\t\tthis.columnLabels = document.querySelectorAll(\".ms-standardheader\");\r\n\t};\r\n\r\n\r\n\tVisibilityManager.prototype.findRow = function(fieldName) {\r\n\t\tfor (var i = 0; i < this.columnLabels.length; i++) {\r\n\t\t\tvar innerText = (this.columnLabels[i].innerText || this.columnLabels[i].textContent);\r\n\t\t\tinnerText = innerText.replace(\"*\", \"\").trim();\r\n\t\t\tif (innerText === fieldName) {\r\n\t\t\t\treturn this.columnLabels[i].parentNode.parentNode;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tVisibilityManager.prototype.hideField = function(fieldName) {\r\n\t\tthis.findRow(fieldName).style.display = \"none\";\r\n\r\n\t};\r\n\r\n\tVisibilityManager.prototype.toggleVisiblity = function(fields, shouldShow) {\r\n\t\tfor (var i = 0; i < fields.length; i++) {\r\n\t\t\tthis.findRow(fields[i]).style.display = shouldShow ? \"table-row\" : \"none\";\r\n\t\t}\r\n\t};\r\n\r\n\tVisibilityManager.prototype.createCheckboxToggle = function(checkboxName, childFields) {\r\n\t\tvar self = this;\r\n\t\tvar checkbox = self.findRow(checkboxName).querySelector(\"input[type='checkbox'\");\r\n\t\tcheckbox.onclick = function() {\r\n\t\t\tself.toggleVisiblity(childFields, checkbox.checked);\r\n\t\t};\r\n\t\tself.toggleVisiblity(childFields, checkbox.checked);\r\n\t\treturn checkbox;\r\n\t};\r\n\r\n\tVisibilityManager.prototype.createDropdownToggle = function(dropdownName, choices) {\r\n\t\tvar self = this;\r\n\t\tvar dropdown = self.findRow(dropdownName).querySelector(\"select\");\r\n\t\tvar update = function() {\r\n\t\t\tvar value = dropdown.value;\r\n\t\t\tfor (var i = 0; i < choices.length; i++) {\r\n\t\t\t\tself.toggleVisiblity(choices[i].childFields, value == choices[i].value);\r\n\t\t\t}\r\n\t\t};\r\n\t\tdropdown.onchange = update;\r\n\t\tupdate();\r\n\t\treturn dropdown;\r\n\t};\r\n\r\n\tVisibilityManager.prototype.createRadioToggle = function(radio, choices) {\r\n\t\tvar self = this;\r\n\t\tvar radios = self.findRow(radio).querySelectorAll(\"input[type='radio']\");\r\n\t\tvar update = function() {\r\n\t\t\tvar value = \"\";\r\n\t\t\tfor (var i = 0; i < radios.length; i++) {\r\n\t\t\t\tif (radios[i].checked) {\r\n\t\t\t\t\tvalue = radios[i].value;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (i = 0; i < choices.length; i++) {\r\n\t\t\t\tself.toggleVisiblity(choices[i].childFields, value == choices[i].value);\r\n\t\t\t}\r\n\t\t};\r\n\t\tfor (var i = 0; i < radios.length; i++) {\r\n\t\t\tradios[i].onclick = update;\r\n\t\t}\r\n\r\n\t\tupdate();\r\n\t\treturn radios;\r\n\t};\r\n\r\n\t//Manually implement String.trim() for IE8 (we'll need it to trim the label because IE likes to toss whitespace in there)\r\n\tif (!String.prototype.trim) {\r\n\t\tString.prototype.trim = function() {\r\n\t\t\treturn this.replace(/^\\s+|\\s+$/gm, '');\r\n\t\t};\r\n\t}\r\n\r\n\tglobal.VisibilityManager = VisibilityManager;\r\n})(window);\r\n"]}