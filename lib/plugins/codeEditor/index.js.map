{"version":3,"sources":["../../../src/plugins/codeEditor/index.js"],"names":[],"mappings":";;AAAA,IAAI,MAAM,QAAQ,WAAR,CAAV;AACA,QAAQ,QAAR,GAAmB,UAAS,SAAT,EAAoB;AACnC,QAAI,WAAW,YAAf;AACA,QAAI,MAAJ;;AAEA,QAAI,cAAc,SAAd,WAAc,CAAS,GAAT,EAAc;AAC5B,gBAAQ,GAAR,CAAY,cAAZ;AACA,iBAAS,IAAI,IAAJ,CAAS,QAAT,CAAT;AACA,eAAO,QAAP,CAAgB,mBAAhB;AACA,YAAI,WAAW,SAAS,cAAT,CAAwB,QAAxB,EAAkC,YAAlC,CAA+C,eAA/C,CAAf;AACA,YAAI,QAAJ,EAAc;AACV,mBAAO,UAAP,GAAoB,OAApB,CAA4B,cAAc,QAA1C;AACH;AACJ,KARD;;AAUA,QAAI,kBAAkB;AAClB,cAAM,SADY;AAElB,eAFkB,mBAEV,GAFU,EAEL;AACT,oBAAQ,GAAR,CAAY,QAAZ;AACA,oBAAQ,GAAR,CAAY,GAAZ;AACA,qBAAS,KAAT,CAAe,cAAf,CAA8B,KAA9B,EAAqC,IAArC,CAA0C;AAAA,uBAAM,YAAY,GAAZ,CAAN;AAAA,aAA1C;AACH,SANiB;AAOlB,cAPkB,kBAOX,GAPW,EAON;AACR,gBAAI,OAAO,IAAI,WAAf;AACA,gBAAI,WAAW,KAAK,UAAL,yBAAsC,KAAK,QAA3C,UAA0D,EAAzE;AACA,iCAAmB,QAAnB,UAAgC,QAAhC,oDAAsF,KAAK,SAAL,KAAmB,EAAzG;AACH,SAXiB;AAYlB,gBAZkB,oBAYT,GAZS,EAYJ;AACV,oBAAQ,GAAR,CAAY,WAAZ;AACA,mBAAO,OAAO,QAAP,EAAP;AACH,SAfiB;;AAgBlB,mBAAU,CAAC,MAAD,EAAS,SAAT,EAAmB,aAAnB,EAAkC,UAAlC;AAhBQ,KAAtB;;AAmBA,aAAS,KAAT,CAAe,cAAf,CAA8B,mCAA9B,EAAmE,IAAnE,CAAwE,YAAM;AAC1E,YAAI,iBAAJ,CAAsB,eAAtB;AACH,KAFD;AAGH,CApCD;AAqCA,WAAW,YAAM;AAChB,aAAS,KAAT,CAAe,SAAf,CAAyB,yDAAzB;AACA,CAFD,EAEE,EAFF","file":"index.js","sourcesContent":["var CSR = require(\"../../csr\");\r\nexports.register = function(fieldName) {\r\n    var editorId = \"ace-editor\";\r\n    var editor;\r\n\r\n    var setupEditor = function(ctx) {\r\n        console.log(\"SETUP EDITOR\");\r\n        editor = ace.edit(editorId);\r\n        editor.setTheme(\"ace/theme/monokai\");\r\n        var language = document.getElementById(editorId).getAttribute(\"data-language\");\r\n        if (language) {\r\n            editor.getSession().setMode(\"ace/mode/\" + language)\r\n        }\r\n    };\r\n\r\n    var codeEditorField = {\r\n        name: fieldName,\r\n        onReady(ctx) {\r\n            console.log(\"Onload\");\r\n            console.log(ctx)\r\n            SPScript.utils.waitForLibrary(\"ace\").then(() => setupEditor(ctx));\r\n        },\r\n        render(ctx) {\r\n            var item = ctx.CurrentItem;\r\n            var language = item[\"Language\"] ? ` data-language='${item.Language}' ` : \"\";\r\n            return `<div id='${editorId}' ${language} style='min-height:200px; min-width:300px'>${item[fieldName] || \"\"}</div>`\r\n        },\r\n        getValue(ctx) {\r\n            console.log(\"GET VALUE\");\r\n            return editor.getValue();\r\n        },\r\n        locations:[\"View\", \"NewForm\",\"DisplayForm\", \"EditForm\"]\r\n    };\r\n\r\n    SPScript.utils.waitForLibrary(\"SPClientTemplates.TemplateManager\").then(() => {\r\n        CSR.registerFormField(codeEditorField);\r\n    })\r\n};\r\nsetTimeout(() => {\r\n\tSPScript.utils.getScript(\"https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.5/ace.js\");\r\n},10)"]}